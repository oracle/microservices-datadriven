<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.140.1">
    <meta name="generator" content="Relearn 7.1.1+ab4197f3113afa9a7d17bed69dbef6c0e75a4921">
    <meta name="description" content="Now you can test your LRA to verify it performs correctly under various circumstances.
Start a tunnel to access the transfer service
Since the transfer service is not exposed outside the Kubernetes cluster, you will need to start a kubectl port forwarding tunnel to access its endpoints.
Note: If you prefer, you can create a route in the APISIX API Gateway to expose the service. The service will normally only be invoked from within the cluster, so you did not create a route for it. However, you have learned how to create routes, so you may do that if you prefer.">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Run LRA test cases :: CloudBank AI">
    <meta name="twitter:description" content="Now you can test your LRA to verify it performs correctly under various circumstances.
Start a tunnel to access the transfer service
Since the transfer service is not exposed outside the Kubernetes cluster, you will need to start a kubectl port forwarding tunnel to access its endpoints.
Note: If you prefer, you can create a route in the APISIX API Gateway to expose the service. The service will normally only be invoked from within the cluster, so you did not create a route for it. However, you have learned how to create routes, so you may do that if you prefer.">
    <meta property="og:url" content="https://oracle.github.io/microservices-datadriven/cloudbank/saga/test/index.html">
    <meta property="og:site_name" content="CloudBank AI">
    <meta property="og:title" content="Run LRA test cases :: CloudBank AI">
    <meta property="og:description" content="Now you can test your LRA to verify it performs correctly under various circumstances.
Start a tunnel to access the transfer service
Since the transfer service is not exposed outside the Kubernetes cluster, you will need to start a kubectl port forwarding tunnel to access its endpoints.
Note: If you prefer, you can create a route in the APISIX API Gateway to expose the service. The service will normally only be invoked from within the cluster, so you did not create a route for it. However, you have learned how to create routes, so you may do that if you prefer.">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Manage Sagas">
    <meta itemprop="name" content="Run LRA test cases :: CloudBank AI">
    <meta itemprop="description" content="Now you can test your LRA to verify it performs correctly under various circumstances.
Start a tunnel to access the transfer service
Since the transfer service is not exposed outside the Kubernetes cluster, you will need to start a kubectl port forwarding tunnel to access its endpoints.
Note: If you prefer, you can create a route in the APISIX API Gateway to expose the service. The service will normally only be invoked from within the cluster, so you did not create a route for it. However, you have learned how to create routes, so you may do that if you prefer.">
    <meta itemprop="wordCount" content="784">
    <title>Run LRA test cases :: CloudBank AI</title>
    <link href="/microservices-datadriven/cloudbank/images/favicon.png?1741199486" rel="icon" type="image/png">
    <link href="/microservices-datadriven/cloudbank/css/fontawesome-all.min.css?1741199486" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/microservices-datadriven/cloudbank/css/fontawesome-all.min.css?1741199486" rel="stylesheet"></noscript>
    <link href="/microservices-datadriven/cloudbank/css/nucleus.css?1741199486" rel="stylesheet">
    <link href="/microservices-datadriven/cloudbank/css/auto-complete.css?1741199486" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/microservices-datadriven/cloudbank/css/auto-complete.css?1741199486" rel="stylesheet"></noscript>
    <link href="/microservices-datadriven/cloudbank/css/perfect-scrollbar.min.css?1741199486" rel="stylesheet">
    <link href="/microservices-datadriven/cloudbank/css/fonts.css?1741199486" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/microservices-datadriven/cloudbank/css/fonts.css?1741199486" rel="stylesheet"></noscript>
    <link href="/microservices-datadriven/cloudbank/css/theme.css?1741199486" rel="stylesheet">
    <link href="/microservices-datadriven/cloudbank/css/theme-zen-light.css?1741199486" rel="stylesheet" id="R-variant-style">
    <link href="/microservices-datadriven/cloudbank/css/chroma-relearn-light.css?1741199486" rel="stylesheet" id="R-variant-chroma-style">
    <link href="/microservices-datadriven/cloudbank/css/print.css?1741199486" rel="stylesheet" media="print">
    <script src="/microservices-datadriven/cloudbank/js/variant.js?1741199486"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/oracle.github.io\/microservices-datadriven\/cloudbank';
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      // variant stuff
      window.variants && variants.init( [ 'zen-light' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-7HWQVTJ803"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-7HWQVTJ803');
        }
      </script>
  </head>
  <body class="mobile-support html" data-url="/microservices-datadriven/cloudbank/saga/test/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper"> 
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/microservices-datadriven/cloudbank/index.html"><span itemprop="name">CloudBank AI</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="/microservices-datadriven/cloudbank/saga/index.html"><span itemprop="name">Manage Sagas</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Run LRA test cases</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/microservices-datadriven/cloudbank/saga/deploy/index.html" title="Deploy services (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/microservices-datadriven/cloudbank/springai/index.html" title="CloudBank AI Assistant (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable saga" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="run-lra-test-cases">Run LRA test cases</h1>

<p>Now you can test your LRA to verify it performs correctly under various circumstances.</p>
<ol>
<li>
<p>Start a tunnel to access the transfer service</p>
<p>Since the transfer service is not exposed outside the Kubernetes cluster, you will need to start a <strong>kubectl</strong> port forwarding tunnel to access its endpoints.</p>
<blockquote>
<p><strong>Note</strong>: If you prefer, you can create a route in the APISIX API Gateway to expose the service.  The service will normally only be invoked from within the cluster, so you did not create a route for it.  However, you have learned how to create routes, so you may do that if you prefer.</p>
</blockquote>
<p>Run this command to start the tunnel:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl -n application port-forward svc/transfer 7000:8080</span></span></code></pre></div>
<p>Now the transfer service will be accessible at <a href="http://localhost:7000/api/v1/transfer" rel="external" target="_blank">http://localhost:7000/api/v1/transfer</a>.</p>
</li>
<li>
<p>Check the starting account balances</p>
<p>In several of the next few commands, you need to provide the correct IP address for the API Gateway in your backend environment.  Not the ones that use <code>localhost</code>, just those where the example uses <code>100.20.30.40</code> as the address. You can find the IP address using this command, you need the one listed in the <code>EXTERNAL-IP</code> column:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl -n ingress-nginx get service ingress-nginx-controller
</span></span><span style="display:flex;"><span>NAME                       TYPE           CLUSTER-IP      EXTERNAL-IP   PORT<span style="color:#f92672">(</span>S<span style="color:#f92672">)</span>                      AGE
</span></span><span style="display:flex;"><span>ingress-nginx-controller   LoadBalancer   10.123.10.127   100.20.30.40  80:30389/TCP,443:30458/TCP   13d</span></span></code></pre></div>
<p>Before you start, check the balances of the two accounts that you will be transferring money between using this command (make sure you are using the EXTERNAL-IP of your environment). Note that these accounts were created in an earlier step.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ curl -s http://100.20.30.40/api/v1/account/1 | jq ; curl -s http://100.20.30.40/api/v1/account/2 | jq
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountId&#34;</span>: 1,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountName&#34;</span>: <span style="color:#e6db74">&#34;Andy&#39;s checking&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountType&#34;</span>: <span style="color:#e6db74">&#34;CH&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountCustomerId&#34;</span>: <span style="color:#e6db74">&#34;abcDe7ged&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountOpenedDate&#34;</span>: <span style="color:#e6db74">&#34;2023-03-06T13:56:43.000+00:00&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountOtherDetails&#34;</span>: <span style="color:#e6db74">&#34;Account Info&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountBalance&#34;</span>: -20
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountId&#34;</span>: 2,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountName&#34;</span>: <span style="color:#e6db74">&#34;Mark&#39;s CCard&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountType&#34;</span>: <span style="color:#e6db74">&#34;CC&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountCustomerId&#34;</span>: <span style="color:#e6db74">&#34;bkzLp8cozi&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountOpenedDate&#34;</span>: <span style="color:#e6db74">&#34;2023-03-06T13:56:44.000+00:00&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountOtherDetails&#34;</span>: <span style="color:#e6db74">&#34;Mastercard account&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountBalance&#34;</span>: <span style="color:#ae81ff">1000</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div>
<p>Note that account 1 has -$20 in this example, and account 2 has $1,000.  Your results may be different.</p>
</li>
<li>
<p>Perform a transfer that should succeed</p>
<p>Run this command to perform a transfer that should succeed.  Note that both accounts exist and the amount of the transfer is less than the balance of the source account.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ curl -X POST <span style="color:#e6db74">&#34;http://localhost:7000/transfer?fromAccount=2&amp;toAccount=1&amp;amount=100&#34;</span>
</span></span><span style="display:flex;"><span>transfer status:withdraw succeeded deposit succeeded</span></span></code></pre></div>
<p>Check the two accounts again to confirm the transfer behaved as expected:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ curl -s http://100.20.30.40/api/v1/account/1 | jq ; curl -s http://100.20.30.40/api/v1/account/2 | jq
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountId&#34;</span>: 1,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountName&#34;</span>: <span style="color:#e6db74">&#34;Andy&#39;s checking&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountType&#34;</span>: <span style="color:#e6db74">&#34;CH&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountCustomerId&#34;</span>: <span style="color:#e6db74">&#34;abcDe7ged&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountOpenedDate&#34;</span>: <span style="color:#e6db74">&#34;2023-03-06T13:56:43.000+00:00&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountOtherDetails&#34;</span>: <span style="color:#e6db74">&#34;Account Info&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountBalance&#34;</span>: <span style="color:#ae81ff">80</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountId&#34;</span>: 2,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountName&#34;</span>: <span style="color:#e6db74">&#34;Mark&#39;s CCard&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountType&#34;</span>: <span style="color:#e6db74">&#34;CC&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountCustomerId&#34;</span>: <span style="color:#e6db74">&#34;bkzLp8cozi&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountOpenedDate&#34;</span>: <span style="color:#e6db74">&#34;2023-03-06T13:56:44.000+00:00&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountOtherDetails&#34;</span>: <span style="color:#e6db74">&#34;Mastercard account&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;accountBalance&#34;</span>: <span style="color:#ae81ff">900</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div>
<p>Notice that account 2 now has only $900 and account 1 has $80.  So the $100 was successfully transferred as expected.</p>
</li>
<li>
<p>Perform a transfer that should fail due to insufficient funds in the source account</p>
<p>Run this command to attempt to transfer $100,000 from account 2 to account 1.  This should fail because account 2 does not have enough funds.</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ curl -X POST <span style="color:#e6db74">&#34;http://localhost:7000/transfer?fromAccount=2&amp;toAccount=1&amp;amount=100000&#34;</span>
</span></span><span style="display:flex;"><span>transfer status:withdraw failed: insufficient funds</span></span></code></pre></div>
</li>
<li>
<p>Perform a transfer that should fail due to the destination account not existing.</p>
<p>Execute the following command to perform a <code>failed</code> transfer:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ curl -X POST <span style="color:#e6db74">&#34;http://localhost:7000/transfer?fromAccount=2&amp;toAccount=6799999&amp;amount=100&#34;</span>
</span></span><span style="display:flex;"><span>transfer status:withdraw succeeded deposit failed: account does not exist%  </span></span></code></pre></div>
</li>
<li>
<p>Access the applications logs to verify what happened in each case</p>
<p>Access the Transfer application log with this command.  Your output will be different:</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ kubectl -n application logs svc/transfer
</span></span><span style="display:flex;"><span>2023-03-04 21:52:12.421  INFO <span style="color:#ae81ff">1</span> --- <span style="color:#f92672">[</span>nio-8080-exec-3<span style="color:#f92672">]</span> TransferService                          : Started new LRA/transfer Id: http://otmm-tcs.otmm.svc.cluster.local:9000/api/v1/lra-coordinator/18a093ef-beb6-4065-bb6c-b9328c8bb3e5
</span></span><span style="display:flex;"><span>2023-03-04 21:52:12.422  INFO <span style="color:#ae81ff">1</span> --- <span style="color:#f92672">[</span>nio-8080-exec-3<span style="color:#f92672">]</span> TransferService                          : withdraw accountId <span style="color:#f92672">=</span> 2, amount <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>2023-03-04 21:52:12.426  INFO <span style="color:#ae81ff">1</span> --- <span style="color:#f92672">[</span>nio-8080-exec-3<span style="color:#f92672">]</span> TransferService                          : withdraw lraId <span style="color:#f92672">=</span> http://otmm-tcs.otmm.svc.cluster.local:9000/api/v1/lra-coordinator/18a093ef-beb6-4065-bb6c-b9328c8bb3e5
</span></span><span style="display:flex;"><span>2023-03-04 21:52:12.615  INFO <span style="color:#ae81ff">1</span> --- <span style="color:#f92672">[</span>nio-8080-exec-3<span style="color:#f92672">]</span> TransferService                          : withdraw succeeded
</span></span><span style="display:flex;"><span>2023-03-04 21:52:12.616  INFO <span style="color:#ae81ff">1</span> --- <span style="color:#f92672">[</span>nio-8080-exec-3<span style="color:#f92672">]</span> TransferService                          : deposit accountId <span style="color:#f92672">=</span> 6799999, amount <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>2023-03-04 21:52:12.619  INFO <span style="color:#ae81ff">1</span> --- <span style="color:#f92672">[</span>nio-8080-exec-3<span style="color:#f92672">]</span> TransferService                          : deposit lraId <span style="color:#f92672">=</span> http://otmm-tcs.otmm.svc.cluster.local:9000/api/v1/lra-coordinator/18a093ef-beb6-4065-bb6c-b9328c8bb3e5
</span></span><span style="display:flex;"><span>2023-03-04 21:52:12.726  INFO <span style="color:#ae81ff">1</span> --- <span style="color:#f92672">[</span>nio-8080-exec-3<span style="color:#f92672">]</span> TransferService                          : withdraw succeeded deposit failed: account does not exist
</span></span><span style="display:flex;"><span>2023-03-04 21:52:12.726  INFO <span style="color:#ae81ff">1</span> --- <span style="color:#f92672">[</span>nio-8080-exec-3<span style="color:#f92672">]</span> TransferService                          : LRA/transfer action will be cancel
</span></span><span style="display:flex;"><span>2023-03-04 21:52:12.757  INFO <span style="color:#ae81ff">1</span> --- <span style="color:#f92672">[</span>nio-8080-exec-1<span style="color:#f92672">]</span> TransferService                          : Received cancel <span style="color:#66d9ef">for</span> transfer : http://otmm-tcs.otmm.svc.cluster.local:9000/api/v1/lra-coordinator/18a093ef-beb6-4065-bb6c-b9328c8bb3e5
</span></span><span style="display:flex;"><span>2023-03-04 21:52:12.817  INFO <span style="color:#ae81ff">1</span> --- <span style="color:#f92672">[</span>nio-8080-exec-2<span style="color:#f92672">]</span> TransferService                          : Process cancel <span style="color:#66d9ef">for</span> transfer : http://otmm-tcs.otmm.svc.cluster.local:9000/api/v1/lra-coordinator/18a093ef-beb6-4065-bb6c-b9328c8bb3e5</span></span></code></pre></div>
<p>In the example output above you can see one what happened during that last test you ran a moment ago.  Notice that the LRA started, the withdrawal succeeded, then the deposit failed because the account did not exist.  Then you can see that the next action is cancel, and then the LRA being canceled/compensated.</p>
</li>
</ol>
<p>In this module you have learned about the Saga pattern by implementing an account transfer scenarios.
You did this by implementing the long running activity, including <code>transfer</code> and <code>account</code> services that connect to a coordinator, according to the Long Running Action specification.</p>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
<img src="https://oracle.github.io/microservices-datadriven/cloudbank//cloudbank-logo.png" height="100px">
        </div>
        <script>
          window.index_js_url="/microservices-datadriven/cloudbank/searchindex.en.js?1741199486";
        </script>
        <search><form action="/microservices-datadriven/cloudbank/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
        <script>
          var contentLangs=['en'];
        </script>
        <script src="/microservices-datadriven/cloudbank/js/auto-complete.js?1741199486" defer></script>
        <script src="/microservices-datadriven/cloudbank/js/lunr/lunr.min.js?1741199486" defer></script>
        <script src="/microservices-datadriven/cloudbank/js/lunr/lunr.stemmer.support.min.js?1741199486" defer></script>
        <script src="/microservices-datadriven/cloudbank/js/lunr/lunr.multi.min.js?1741199486" defer></script>
        <script src="/microservices-datadriven/cloudbank/js/lunr/lunr.en.min.js?1741199486" defer></script>
        <script src="/microservices-datadriven/cloudbank/js/search.js?1741199486" defer></script>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <ul>
          <li><a class="padding" href="/microservices-datadriven/cloudbank/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
        </ul>
        <hr class="padding">
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div id="R-shortcutmenu-home" class="R-sidebarmenu">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/provision/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/provision/index.html">Provision an Instance</a><ul id="R-subsections-d6947c2d1078796b2bfd976ebc0e0264" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/devenv/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/devenv/index.html">Developer Environment</a><ul id="R-subsections-559c2972a719279af6301d7032063e64" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/account/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/account/index.html">Account Microservice</a><ul id="R-subsections-af4a17527840af40a6cda3fc650af51b" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/check/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/check/index.html">Check Processing</a><ul id="R-subsections-159f69b312555d5f0055ca241e6721e2" class="collapsible-menu"></ul></li>
            <li class="parent " data-nav-id="/microservices-datadriven/cloudbank/saga/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/saga/index.html">Manage Sagas</a><ul id="R-subsections-dfd968a77748ad1f1a28d6a9118be66e" class="collapsible-menu">
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/saga/intro/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/saga/intro/index.html">Introduction</a></li>
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/saga/learn/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/saga/learn/index.html">Learn about the Saga pattern</a></li>
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/saga/learn-lra/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/saga/learn-lra/index.html">Learn about Long Running Actions</a></li>
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/saga/prepare/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/saga/prepare/index.html">Prepare the Account service</a></li>
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/saga/deposit/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/saga/deposit/index.html">Create the Deposit service</a></li>
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/saga/dao/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/saga/dao/index.html">Create a Data Access Object</a></li>
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/saga/business-logic/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/saga/business-logic/index.html">Implement business logic</a></li>
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/saga/withdraw-service/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/saga/withdraw-service/index.html">Create the Withdrawal service</a></li>
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/saga/transfer-service/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/saga/transfer-service/index.html">Create the Transfer service</a></li>
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/saga/deploy/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/saga/deploy/index.html">Deploy services</a></li>
            <li class="active " data-nav-id="/microservices-datadriven/cloudbank/saga/test/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/saga/test/index.html">Run LRA test cases</a></li></ul></li>
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/springai/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/springai/index.html">CloudBank AI Assistant</a><ul id="R-subsections-868fb0154339332ae87e7c98e3fa9bee" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/deploy-cli/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/deploy-cli/index.html">Deploy with the CLI</a><ul id="R-subsections-b839a8f6f0f5efd1be94b7f9da9e78d1" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/deploy-ide/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/deploy-ide/index.html">Deploy with an IDE</a><ul id="R-subsections-fd584c0da8f22ebe818df94300151866" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/backend/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/backend/index.html">Explore the Backend</a><ul id="R-subsections-f948b454f68385a53d2483b3c80424ae" class="collapsible-menu"></ul></li>
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/cleanup/index.html"><a class="padding" href="/microservices-datadriven/cloudbank/cleanup/index.html">Cleanup</a><ul id="R-subsections-6d9c3a2633de07dcbf4491d943578384" class="collapsible-menu"></ul></li>
          </ul>
        </div>
        <div id="R-shortcutmenu-shortcuts" class="R-sidebarmenu">
          <div class="nav-title padding">More</div>
          <ul class="space collapsible-menu">
            <li class="" data-nav-id="https://github.com/oracle/microservices-datadriven"><a class="padding" href="https://github.com/oracle/microservices-datadriven" target="_blank"><i class='fa-fw fab fa-github'></i> GitHub repo</a></li>
            <li class="" data-nav-id="https://bit.ly/oraclespringboot"><a class="padding" href="https://bit.ly/oraclespringboot" target="_blank"><i class='fa-fw fas fa-bookmark'></i> Oracle Backend for Spring Boot and Microservices</a></li>
            <li class="" data-nav-id="https://github.com/oracle/spring-cloud-oracle"><a class="padding" href="https://github.com/oracle/spring-cloud-oracle" target="_blank"><i class='fa-fw fas fa-bookmark'></i> Spring Cloud Oracle</a></li>
            <li class="" data-nav-id="/microservices-datadriven/cloudbank/more/credits/"><a class="padding" href="/microservices-datadriven/cloudbank/more/credits/"><i class='fa-fw fas fa-bullhorn'></i> Credits</a></li>
          </ul>
        </div>
        <div class="padding footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"></div>
        <div id="R-menu-footer">
          <hr class="padding default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter">
          <div id="R-prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks">
            <ul>
              <li id="R-select-language-container" class="footerLangSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-language"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-language">Language</label>
                    <select id="R-select-language" onchange="location = this.querySelector( this.value ).dataset.url;">
                      <option id="R-select-language-en" value="#R-select-language-en" data-url="/microservices-datadriven/cloudbank/saga/test/index.html" lang="en-us" selected></option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
              <li id="R-select-variant-container" class="footerVariantSwitch">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-paint-brush"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <label class="a11y-only" for="R-select-variant">Theme</label>
                    <select id="R-select-variant" onchange="window.variants && variants.changeVariant( this.value );">
                      <option id="R-select-variant-zen-light" value="zen-light" selected>Zen Light</option>
                    </select>
                  </div>
                  <div class="clear"></div>
                </div>
                <script>window.variants && variants.markSelectedVariant();</script>
              </li>
              <li class="footerVisitedLinks">
                <div class="padding menu-control">
                  <i class="fa-fw fas fa-history"></i>
                  <span>&nbsp;</span>
                  <div class="control-style">
                    <button onclick="clearHistory();">Clear History</button>
                  </div>
                  <div class="clear"></div>
                </div>
              </li>
            </ul>
          </div>
          <div id="R-footer" class="footerFooter showFooter">
	    <p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://www.oracle.com/">Oracle</a></p>
		<p>Copyright &copy; 2022, 2024, <br>Oracle and/or its affiliates</p>
          </div>
        </div>
      </div>
    </aside>
    <script src="/microservices-datadriven/cloudbank/js/clipboard.min.js?1741199486" defer></script>
    <script src="/microservices-datadriven/cloudbank/js/perfect-scrollbar.min.js?1741199486" defer></script>
    <script src="/microservices-datadriven/cloudbank/js/theme.js?1741199486" defer></script>
  </body>
</html>
