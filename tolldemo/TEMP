create user tolldemo identified by Welcome12345;
grant resource, connect, unlimited tablespace to tolldemo;
grant execute on dbms_aq to tolldemo;
grant execute on dbms_aqadm to tolldemo;
grant execute on dbms_aqin to tolldemo;
grant execute on dbms_aqjms_internal to tolldemo;
grant execute on dbms_teqk to tolldemo;
grant execute on DBMS_RESOURCE_MANAGER to tolldemo;
grant select_catalog_role to tolldemo;
grant select on sys.aq$_queue_shards to tolldemo;
grant select on user_queue_partition_assignment_table to tolldemo;
exec  dbms_teqk.AQ$_GRANT_PRIV_FOR_REPL('TOLLDEMO');
commit;

connect tolldemo/Welcome12345

begin
  dbms_awadm.create_sharded_queue (queue_name => 'TollGate', multiple_consumers => true);
  dbms_awadm.set_queue_parameter(tname, 'KEY_BASED_ENQUEUE', 2);
  dbms_awadm.set_queue_parameter(tname, 'SHARD_NUM', 5);
  dbms_awadm.start_queue(tname) ;
end;
