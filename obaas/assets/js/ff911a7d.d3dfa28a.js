"use strict";(globalThis.webpackChunksite=globalThis.webpackChunksite||[]).push([[366],{3345(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"setup/helm/install","title":"Helm Chart installation","description":"Oracle Backend for Microservices and AI (OBaaS) Helm Charts","source":"@site/docs/setup/helm/install.md","sourceDirName":"setup/helm","slug":"/setup/helm/install","permalink":"/microservices-datadriven/obaas/docs/setup/helm/install","draft":false,"unlisted":false,"editUrl":"https://github.com/oracle/microservices-datadriven/tree/main/docs-source/site/docs/setup/helm/install.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Helm Chart installation","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Prerequisites","permalink":"/microservices-datadriven/obaas/docs/setup/helm/prereqs"},"next":{"title":"OCI Policies","permalink":"/microservices-datadriven/obaas/docs/setup/oci_policies"}}');var i=s(4848),r=s(8453);const l={title:"Helm Chart installation",sidebar_position:2},t=void 0,c={},o=[{value:"Oracle Backend for Microservices and AI (OBaaS) Helm Charts",id:"oracle-backend-for-microservices-and-ai-obaas-helm-charts",level:2},{value:"Architecture",id:"architecture",level:3},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Installation Guide",id:"installation-guide",level:3},{value:"Step 1: Install Prerequisites (Once Per Cluster)",id:"step-1-install-prerequisites-once-per-cluster",level:4},{value:"Step 2: Install OBaaS",id:"step-2-install-obaas",level:4},{value:"Step 3: Verify Installation",id:"step-3-verify-installation",level:4},{value:"Example Configurations",id:"example-configurations",level:3},{value:"Default Configuration (<code>values-default.yaml</code>)",id:"default-configuration-values-defaultyaml",level:4},{value:"SIDB-FREE Database (<code>values-sidb-free.yaml</code>)",id:"sidb-free-database-values-sidb-freeyaml",level:4},{value:"Existing ADB Configuration (<code>values-existing-adb.yaml</code>)",id:"existing-adb-configuration-values-existing-adbyaml",level:4},{value:"Other Existing Database (<code>values-byodb.yaml</code>)",id:"other-existing-database-values-byodbyaml",level:4},{value:"Multi-Tenant Setup (<code>values-tenant1.yaml</code>, <code>values-tenant2.yaml</code>)",id:"multi-tenant-setup-values-tenant1yaml-values-tenant2yaml",level:4},{value:"Namespace and Scope Configuration (<code>values-namespace-override.yaml</code>)",id:"namespace-and-scope-configuration-values-namespace-overrideyaml",level:4},{value:"SigNoz Existing Secret (<code>values-signoz-existing-secret.yaml</code>)",id:"signoz-existing-secret-values-signoz-existing-secretyaml",level:4},{value:"Private Registry Configuration (<code>values-private-registry.yaml</code>)",id:"private-registry-configuration-values-private-registryyaml",level:4},{value:"Combining Examples",id:"combining-examples",level:4},{value:"Uninstallation",id:"uninstallation",level:3},{value:"Next Steps",id:"next-steps",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"oracle-backend-for-microservices-and-ai-obaas-helm-charts",children:"Oracle Backend for Microservices and AI (OBaaS) Helm Charts"}),"\n",(0,i.jsx)(n.p,{children:"This document describes how to deploy OBaaS to an existing Kubernetes cluster using Helm charts."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#architecture",children:"Architecture"})," \u2014 Two-chart design, components, and cluster layout"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#prerequisites",children:"Prerequisites"})," \u2014 Required tools and cluster access"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#installation-guide",children:"Installation Guide"})," \u2014 Step-by-step deployment process"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#example-configurations",children:"Example Configurations"})," \u2014 Common deployment scenarios:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#default-configuration-values-defaultyaml",children:"Default"})," \u2014 Quick start with no overrides"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#sidb-free-database-values-sidb-freeyaml",children:"SIDB-FREE Database"})," \u2014 In-cluster Oracle Database Free container"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#existing-adb-configuration-values-existing-adbyaml",children:"Existing ADB"})," \u2014 Connect to a pre-provisioned Autonomous Database"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#other-existing-database-values-byodbyaml",children:"Other Existing Database"})," - Connect to another type of pre-existing Oracle AI Database, for example an Oracle Base DB, or an on-premises Oracle Database"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#multi-tenant-setup-values-tenant1yaml-values-tenant2yaml",children:"Multi-Tenant"})," \u2014 Run multiple OBaaS instances in one cluster"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#namespace-and-scope-configuration-values-namespace-overrideyaml",children:"Namespace and Scope"})," \u2014 Control which namespaces components watch"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#signoz-existing-secret-values-signoz-existing-secretyaml",children:"SigNoz Existing Secret"})," \u2014 Pre-provisioned SigNoz credentials"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#private-registry-configuration-values-private-registryyaml",children:"Private Registry"})," \u2014 Air-gapped and corporate registry setups"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#combining-examples",children:"Combining Examples"})," \u2014 Layer multiple values files together"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#uninstallation",children:"Uninstallation"})," \u2014 Teardown instructions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#next-steps",children:"Next Steps"})," \u2014 Deploy applications and configure observability"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"architecture",children:"Architecture"}),"\n",(0,i.jsx)(n.p,{children:"The deployment uses a two-chart architecture. The charts are separated because the prerequisites install cluster-wide CRDs and operators that must only exist once, while the OBaaS chart contains namespace-scoped resources that can be safely installed multiple times."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"obaas-prereqs"})," (cluster-scoped, install once):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"cert-manager"})," - Automatic TLS certificate management"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"external-secrets"})," - Integration with external secret stores"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"metrics-server"})," - Container resource metrics"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"kube-state-metrics"})," - Kubernetes object metrics"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"strimzi-kafka-operator"})," - Kafka cluster operator"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"oraoperator"})," - Oracle Database Operator for Kubernetes"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Installing this chart multiple times will cause CRD version conflicts, duplicate operator controllers, and resource contention."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"obaas"})," (namespace-scoped, install per tenant):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ingress-nginx"})," - Namespace-specific ingress controller"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Apache APISIX"})," - API Gateway"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Eureka"})," - Service discovery"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Signoz"})," - Observability stack with ClickHouse"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Spring Boot Admin"})," - Application monitoring"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Conductor"})," - Workflow orchestration"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"OTMM"})," - Transaction manager for microservices"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Each instance operates independently in its own namespace with its own ingress controller and observability stack."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tree",children:"Cluster\n\u251c\u2500\u2500 obaas-system namespace (prerequisites - install once)\n\u2502   \u251c\u2500\u2500 cert-manager\n\u2502   \u251c\u2500\u2500 external-secrets\n\u2502   \u251c\u2500\u2500 metrics-server\n\u2502   \u251c\u2500\u2500 kube-state-metrics\n\u2502   \u2514\u2500\u2500 strimzi-kafka-operator (manages Kafka CRs across all namespaces)\n\u251c\u2500\u2500 tenant1 namespace (OBaaS instance 1)\n\u2502   \u251c\u2500\u2500 ingress-nginx\n\u2502   \u251c\u2500\u2500 APISIX, Eureka, Coherence, etc.\n\u2502   \u251c\u2500\u2500 Kafka cluster (CR managed by Strimzi)\n\u2502   \u2514\u2500\u2500 Signoz + ClickHouse\n\u2514\u2500\u2500 tenant2 namespace (OBaaS instance 2)\n    \u251c\u2500\u2500 ingress-nginx\n    \u251c\u2500\u2500 APISIX, Eureka, Coherence, etc.\n    \u251c\u2500\u2500 Kafka cluster (CR managed by Strimzi)\n    \u2514\u2500\u2500 Signoz + ClickHouse\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Namespace behavior:"})," All OBaaS chart components deploy to the release namespace (specified with the ",(0,i.jsx)(n.code,{children:"-n"})," flag during install). By default, ingress-nginx watches only its own release namespace (",(0,i.jsx)(n.code,{children:"scope.enabled: true"}),")."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Directory structure:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tree",children:"helm/\n\u251c\u2500\u2500 obaas-prereqs/         # Cluster-singleton prerequisites (install once per cluster)\n\u2514\u2500\u2500 obaas/                 # OBaaS application chart (install N times in different namespaces)\n    \u2514\u2500\u2500 examples/          # Example values files for different scenarios\n"})}),"\n",(0,i.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsx)(n.admonition,{title:"Important",type:"warning",children:(0,i.jsxs)(n.p,{children:["Ensure all ",(0,i.jsx)(n.a,{href:"/microservices-datadriven/obaas/docs/setup/helm/prereqs",children:"prerequisites"})," are met before starting the deployment."]})}),"\n",(0,i.jsx)(n.p,{children:"Verify that you have the required tools installed:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Verify Helm installation\nhelm version\n\n# Verify kubectl and cluster access\nkubectl get nodes\n"})}),"\n",(0,i.jsx)(n.h3,{id:"installation-guide",children:"Installation Guide"}),"\n",(0,i.jsx)(n.h4,{id:"step-1-install-prerequisites-once-per-cluster",children:"Step 1: Install Prerequisites (Once Per Cluster)"}),"\n",(0,i.jsx)(n.admonition,{title:"Cluster-Scoped Installation",type:"warning",children:(0,i.jsx)(n.p,{children:"Only install prerequisites once per cluster. Installing multiple times will cause CRD conflicts and duplicate operator controllers."})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd obaas-prereqs\n\nhelm upgrade --install obaas-prereqs . -n obaas-system --create-namespace [--debug] [--values <path_to_custom_values>]\n"})}),"\n",(0,i.jsx)(n.p,{children:"Verify all prerequisite pods are running before proceeding:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -n obaas-system\n"})}),"\n",(0,i.jsxs)(n.p,{children:["All pods should reach ",(0,i.jsx)(n.code,{children:"Running"})," status within 2-3 minutes."]}),"\n",(0,i.jsx)(n.h4,{id:"step-2-install-obaas",children:"Step 2: Install OBaaS"}),"\n",(0,i.jsx)(n.p,{children:"Choose an example configuration that matches your deployment scenario and install:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd obaas\n\nhelm upgrade --install obaas . -f examples/<values-file>.yaml -n <namespace> --create-namespace [--debug]\n"})}),"\n",(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"#example-configurations",children:"Example Configurations"})," below for the full list of available examples."]}),"\n",(0,i.jsx)(n.p,{children:"Monitor the installation:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -n <namespace> -w\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"First Deployment",type:"tip",children:(0,i.jsx)(n.p,{children:"It may take 5-10 additional minutes for all pods to reach Running state."})}),"\n",(0,i.jsx)(n.h4,{id:"step-3-verify-installation",children:"Step 3: Verify Installation"}),"\n",(0,i.jsx)(n.p,{children:"After installation completes, verify all components are running:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -A\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected results:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["All pods in ",(0,i.jsx)(n.code,{children:"Running"})," state"]}),"\n",(0,i.jsx)(n.li,{children:"Services with ClusterIP or LoadBalancer IPs assigned"}),"\n",(0,i.jsx)(n.li,{children:"Ingress configured with your hostname"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"example-configurations",children:"Example Configurations"}),"\n",(0,i.jsxs)(n.h4,{id:"default-configuration-values-defaultyaml",children:["Default Configuration (",(0,i.jsx)(n.code,{children:"values-default.yaml"}),")"]}),"\n",(0,i.jsx)(n.p,{children:"Minimal configuration with no overrides. All subcharts use their default settings."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use case:"})," Quick start, development, testing"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm upgrade --install obaas . -f examples/values-default.yaml -n obaas --create-namespace [--debug]\n"})}),"\n",(0,i.jsxs)(n.h4,{id:"sidb-free-database-values-sidb-freeyaml",children:["SIDB-FREE Database (",(0,i.jsx)(n.code,{children:"values-sidb-free.yaml"}),")"]}),"\n",(0,i.jsx)(n.p,{children:"Uses Oracle Database Free as an in-cluster container. This is the default database type."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use case:"})," Development, testing, standalone deployments"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm upgrade --install obaas . -f examples/values-sidb-free.yaml -n obaas --create-namespace [--debug]\n"})}),"\n",(0,i.jsxs)(n.h4,{id:"existing-adb-configuration-values-existing-adbyaml",children:["Existing ADB Configuration (",(0,i.jsx)(n.code,{children:"values-existing-adb.yaml"}),")"]}),"\n",(0,i.jsx)(n.p,{children:"Connects to an existing OCI Autonomous Database (ADB-S) instead of deploying a database container."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use case:"})," Production deployments using a pre-provisioned OCI Autonomous Database"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:"Prerequisites: Create required secrets before installing"}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Create the OCI API key secret:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"python3 tools/oci_config.py --namespace NAMESPACE [--config CONFIG] [--profile PROFILE]\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Create the privileged authentication secret for the ADMIN user:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl -n NAMESPACE create secret generic db-priv-authn \\\n  --from-literal=username=ADMIN \\\n  --from-literal=password=<ADMIN PASSWORD> \\\n  --from-literal=service=<DBNAME>_TP\n"})}),"\n"]}),"\n"]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Installation:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm upgrade --install obaas . \\\n  -n NAMESPACE \\\n  -f examples/values-existing-adb.yaml \\\n  --set database.oci.ocid=<ADB_OCID> \\\n  [--debug]\n"})}),"\n",(0,i.jsxs)(n.h4,{id:"other-existing-database-values-byodbyaml",children:["Other Existing Database (",(0,i.jsx)(n.code,{children:"values-byodb.yaml"}),")"]}),"\n",(0,i.jsx)(n.p,{children:"Connects to an existing Oracle AI Database using a connect string and user credentials.\nDo not use this option for an Oracle Autonomous Database.  This is a good option for\nan Oracle Base DB or an on-premises Oracle AI Database."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use case:"})," Production deployments using a pre-existing Oracle AI Database (non-Autonomous)"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:"Prerequisites: Create required secrets before installing"}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Create the privileged authentication secret for an appropriate admin user:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl -n NAMESPACE create secret generic obaas-db-priv-authn \\\n  --from-literal=username=SYSTEM \\\n  --from-literal=password=<SYSTEM PASSWORD> \\\n  --from-literal=service=your.service.name\n"})}),"\n"]}),"\n"]}),(0,i.jsx)(n.p,{children:"The admin user should be a user with DBA privileges that can be used to\ncreate application users and grant them appropriate privileges.  For example,\nthe SYSTEM user is a good choice.  This user should not require the\nSYSDBA role."}),(0,i.jsx)(n.p,{children:"This user should have the following permissions:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"SELECT WITH ADMIN OPTION on:\n  DBA_TABLESPACE_USAGE_METRICS, DBA_TABLESPACES,\n  GV_$SYSTEM_WAIT_CLASS, GV_$ASM_DISKGROUP_STAT, GV_$DATAFILE,\n  GV_$SYSSTAT, GV_$PROCESS, GV_$WAITCLASSMETRIC, GV_$SESSION,\n  GV_$RESOURCE_LIMIT, GV_$PARAMETER, GV_$DATABASE,\n  GV_$SQLSTATS, GV_$SYSMETRIC, V_$DIAG_ALERT_EXT\n\nEXECUTE WITH GRANT OPTION on:\n  SYS.DBMS_AQ, SYS.DBMS_AQADM, SYS.DBMS_AQIN,\n  SYS.DBMS_AQIN, SYS.DBMS_AQJMS_INTERNAL\n"})}),(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["Review and update the database connection details in ",(0,i.jsx)(n.code,{children:"examples/values-byodb.yaml"})]}),"\n"]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Installation:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm upgrade --install obaas . \\\n  -n NAMESPACE \\\n  -f examples/values-byodb.yaml \n  [--debug]\n"})}),"\n",(0,i.jsxs)(n.h4,{id:"multi-tenant-setup-values-tenant1yaml-values-tenant2yaml",children:["Multi-Tenant Setup (",(0,i.jsx)(n.code,{children:"values-tenant1.yaml"}),", ",(0,i.jsx)(n.code,{children:"values-tenant2.yaml"}),")"]}),"\n",(0,i.jsx)(n.p,{children:"Configures unique IngressClass and credentials for each tenant to allow multiple OBaaS instances in the same cluster."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use case:"})," Multi-tenant deployments, namespace isolation"]}),"\n",(0,i.jsxs)(n.p,{children:["Each tenant ",(0,i.jsx)(n.strong,{children:"must"})," have unique values for the following to avoid conflicts:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"controller.ingressClass"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"controller.ingressClassResource.name"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"controller.ingressClassResource.controllerValue"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"controller.electionID"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Install first tenant\nhelm upgrade --install obaas-tenant1 . -n tenant1 -f examples/values-tenant1.yaml --create-namespace [--debug]\n\n# Install second tenant\nhelm upgrade --install obaas-tenant2 . -n tenant2 -f examples/values-tenant2.yaml --create-namespace [--debug]\n"})}),"\n",(0,i.jsxs)(n.h4,{id:"namespace-and-scope-configuration-values-namespace-overrideyaml",children:["Namespace and Scope Configuration (",(0,i.jsx)(n.code,{children:"values-namespace-override.yaml"}),")"]}),"\n",(0,i.jsxs)(n.p,{children:["Demonstrates how to configure the ingress-nginx watching scope. All OBaaS components deploy to the release namespace (specified with the ",(0,i.jsx)(n.code,{children:"-n"})," flag)."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use case:"})," Controlling which namespaces components watch"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm upgrade --install obaas . -f examples/values-namespace-override.yaml -n obaas-platform --create-namespace [--debug]\n"})}),"\n",(0,i.jsxs)(n.h4,{id:"signoz-existing-secret-values-signoz-existing-secretyaml",children:["SigNoz Existing Secret (",(0,i.jsx)(n.code,{children:"values-signoz-existing-secret.yaml"}),")"]}),"\n",(0,i.jsx)(n.p,{children:"Uses a pre-existing Kubernetes secret for SigNoz admin authentication instead of auto-generating one."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use case:"})," GitOps workflows, pre-provisioned credentials"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Create the secret first\nkubectl create secret generic my-signoz-secret \\\n  --from-literal=email=admin@mydomain.com \\\n  --from-literal=password=my-secure-password \\\n  -n obaas\n\n# Install with the example\nhelm upgrade --install obaas . -f examples/values-signoz-existing-secret.yaml -n obaas [--debug]\n"})}),"\n",(0,i.jsxs)(n.h4,{id:"private-registry-configuration-values-private-registryyaml",children:["Private Registry Configuration (",(0,i.jsx)(n.code,{children:"values-private-registry.yaml"}),")"]}),"\n",(0,i.jsx)(n.p,{children:"Uses a private container registry for all images with authentication."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use case:"})," Air-gapped environments, corporate registries, security compliance"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Prerequisites:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Mirror all required images to your private registry."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Create an image pull secret:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl create secret docker-registry myregistry-secret \\\n  --docker-server=myregistry.example.com \\\n  --docker-username=<username> \\\n  --docker-password=<password> \\\n  --docker-email=<email>\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm upgrade --install obaas . -f examples/values-private-registry.yaml [--debug]\n"})}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:"Image registry override details"}),(0,i.jsx)(n.p,{children:"Each subchart has its own image configuration that must be set explicitly."}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Subcharts with a dedicated registry field"})," (set to your registry URL):"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ingress-nginx"}),": ",(0,i.jsx)(n.code,{children:"controller.image.registry"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"signoz"}),": ",(0,i.jsx)(n.code,{children:"global.imageRegistry"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"apisix etcd"}),": ",(0,i.jsx)(n.code,{children:"apisix.etcd.image.registry"})]}),"\n"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"OBaaS components requiring the full repository path"})," (include registry in ",(0,i.jsx)(n.code,{children:"image.repository"}),"):"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"eureka"}),", ",(0,i.jsx)(n.strong,{children:"admin-server"}),", ",(0,i.jsx)(n.strong,{children:"conductor-server"}),", ",(0,i.jsx)(n.strong,{children:"otmm"}),", ",(0,i.jsx)(n.strong,{children:"oracle-database-exporter"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"database"})," (for SIDB-FREE/ADB-FREE)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"apisix"}),": ",(0,i.jsx)(n.code,{children:"apisix.image.repository"}),", ",(0,i.jsx)(n.code,{children:"apisix.initContainer.image"})]}),"\n"]}),(0,i.jsxs)(n.p,{children:["Image pull secrets are propagated to subcharts via ",(0,i.jsx)(n.code,{children:"global.imagePullSecrets"}),". See ",(0,i.jsx)(n.code,{children:"values-private-registry.yaml"})," for a complete example."]}),(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["Cluster-singleton prerequisites (cert-manager, external-secrets, metrics-server, kube-state-metrics, strimzi-kafka-operator) have their own image configuration in the ",(0,i.jsx)(n.code,{children:"obaas-prereqs"})," chart."]})})]}),"\n",(0,i.jsx)(n.h4,{id:"combining-examples",children:"Combining Examples"}),"\n",(0,i.jsx)(n.p,{children:"You can layer multiple values files to combine configurations:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Combine multi-tenant and private registry configurations\nhelm upgrade --install obaas-tenant1 . \\\n  -f examples/values-tenant1.yaml \\\n  -f examples/values-private-registry.yaml \\\n  -n tenant1 --create-namespace [--debug]\n"})}),"\n",(0,i.jsx)(n.p,{children:"Or create a custom values file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# my-custom-values.yaml\nglobal:\n  imagePullSecrets:\n    - name: myregistry-secret\n\n# Disable components you don't need\nai-optimizer:\n  enabled: false\n\nsignoz:\n  enabled: false\n"})}),"\n",(0,i.jsx)(n.h3,{id:"uninstallation",children:"Uninstallation"}),"\n",(0,i.jsx)(n.p,{children:"To remove OBaaS from your cluster:"}),"\n",(0,i.jsx)(n.admonition,{title:"Data Loss",type:"warning",children:(0,i.jsx)(n.p,{children:"Uninstalling will delete all resources. Ensure you have backups of any important data before proceeding."})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Step 1: Uninstall OBaaS instances first:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm uninstall obaas -n obaas-prod\nhelm uninstall obaas-tenant1 -n tenant1\nhelm uninstall obaas-tenant2 -n tenant2\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Step 2: Delete namespaces (optional):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl delete namespace obaas-prod tenant1 tenant2\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Step 3: Uninstall prerequisites (only if removing entirely):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm uninstall obaas-prereqs -n obaas-system\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"Warning",type:"danger",children:(0,i.jsxs)(n.p,{children:["Uninstalling prerequisites will affect ",(0,i.jsx)(n.strong,{children:"all"})," OBaaS instances in the cluster. Only do this if you're removing OBaaS completely."]})}),"\n",(0,i.jsx)(n.h3,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsx)(n.p,{children:"Once OBaaS is running, you can:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/microservices-datadriven/obaas/docs/deploy/",children:"Deploy your application"})," using the OBaaS platform"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/microservices-datadriven/obaas/docs/observability/configure",children:"Configure observability"})," for metrics, logs, and traces"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>l,x:()=>t});var a=s(6540);const i={},r=a.createContext(i);function l(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);