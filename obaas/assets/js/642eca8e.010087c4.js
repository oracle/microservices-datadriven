"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[491],{8327:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"setup/obaas","title":"Prepare and Install the OBaaS Helm chart","description":"OBaaS Helm Chart Installation Guide","source":"@site/docs/setup/obaas.md","sourceDirName":"setup","slug":"/setup/obaas","permalink":"/microservices-datadriven/obaas/docs/setup/obaas","draft":false,"unlisted":false,"editUrl":"https://github.com/oracle/microservices-datadriven/tree/main/docs-source/site/docs/setup/obaas.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"title":"Prepare and Install the OBaaS Helm chart","sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"Prepare and Install the OBaaS Database Helm Chart","permalink":"/microservices-datadriven/obaas/docs/setup/database"},"next":{"title":"Deploy","permalink":"/microservices-datadriven/obaas/docs/category/deploy"}}');var i=a(4848),t=a(8453);const o={title:"Prepare and Install the OBaaS Helm chart",sidebar_position:10},l=void 0,r={},c=[{value:"OBaaS Helm Chart Installation Guide",id:"obaas-helm-chart-installation-guide",level:2},{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Editing values.yaml",id:"editing-valuesyaml",level:3},{value:"Private Repository Configuration",id:"private-repository-configuration",level:4},{value:"Component Selection (Optional)",id:"component-selection-optional",level:4},{value:"Namespace Configuration (Optional)",id:"namespace-configuration-optional",level:4},{value:"Database Configuration (Optional)",id:"database-configuration-optional",level:4},{value:"Option 1: Oracle Autonomous Database (ADB-S)",id:"option-1-oracle-autonomous-database-adb-s",level:5},{value:"Option 2: Non-ADB or Manual Configuration",id:"option-2-non-adb-or-manual-configuration",level:5},{value:"Installation",id:"installation",level:2},{value:"Single Instance Installation",id:"single-instance-installation",level:3},{value:"Multiple Instance Installation",id:"multiple-instance-installation",level:3},{value:"Verification",id:"verification",level:2},{value:"Verify Namespaces",id:"verify-namespaces",level:3},{value:"Verify Pods",id:"verify-pods",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"obaas-helm-chart-installation-guide",children:"OBaaS Helm Chart Installation Guide"}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"This guide walks you through preparing and installing the OBaaS Helm chart in your Kubernetes cluster."}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.p,{children:["Navigate to the ",(0,i.jsx)(n.code,{children:"obaas"})," directory containing the Helm chart files:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd obaas/\nls\n"})}),"\n",(0,i.jsx)(n.p,{children:"Expected output:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"Chart.yaml  LICENSE  README.md  crds  templates  values.yaml\n"})}),"\n",(0,i.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"editing-valuesyaml",children:"Editing values.yaml"}),"\n",(0,i.jsxs)(n.p,{children:["Before installation, you must edit the ",(0,i.jsx)(n.code,{children:"values.yaml"})," file according to your environment requirements."]}),"\n",(0,i.jsx)(n.h4,{id:"private-repository-configuration",children:"Private Repository Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["If you are using a private repository, update each ",(0,i.jsx)(n.code,{children:"image"})," entry to point to your private repository instead of the public repositories."]}),"\n",(0,i.jsx)(n.h4,{id:"component-selection-optional",children:"Component Selection (Optional)"}),"\n",(0,i.jsxs)(n.p,{children:["Each component (e.g., apisix, kafka, coherence) has an ",(0,i.jsx)(n.code,{children:"enabled: true"})," entry. To omit a component, change the setting to ",(0,i.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,i.jsx)(n.h4,{id:"namespace-configuration-optional",children:"Namespace Configuration (Optional)"}),"\n",(0,i.jsxs)(n.p,{children:["To install components into separate namespaces, override the global namespace by setting a value in the ",(0,i.jsx)(n.code,{children:"namespace"})," property inside the component's section."]}),"\n",(0,i.jsx)(n.h4,{id:"database-configuration-optional",children:"Database Configuration (Optional)"}),"\n",(0,i.jsxs)(n.p,{children:["To use an existing Oracle database in your applications, set ",(0,i.jsx)(n.code,{children:"database.enabled"})," to ",(0,i.jsx)(n.code,{children:"true"})," and configure one of the following options:"]}),"\n",(0,i.jsx)(n.h5,{id:"option-1-oracle-autonomous-database-adb-s",children:"Option 1: Oracle Autonomous Database (ADB-S)"}),"\n",(0,i.jsxs)(n.p,{children:["Use this option if your database is an Oracle Autonomous Database in OCI and you want Oracle Database Operator to access and create ",(0,i.jsx)(n.code,{children:"tns"})," and ",(0,i.jsx)(n.code,{children:"wallet"})," secrets."]}),"\n",(0,i.jsx)(n.p,{children:"Configure the following settings:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Set ",(0,i.jsx)(n.code,{children:"database.type"})," to ",(0,i.jsx)(n.code,{children:'"ADB-S"'})]}),"\n",(0,i.jsxs)(n.li,{children:["Provide the OCID of your ADB-S instance in ",(0,i.jsx)(n.code,{children:"database.oci_db.ocid"})]}),"\n",(0,i.jsxs)(n.li,{children:["Update the ",(0,i.jsx)(n.code,{children:"database.oci_config"})," section:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Set ",(0,i.jsx)(n.code,{children:"oke"})," to ",(0,i.jsx)(n.code,{children:"false"})," (setting this to ",(0,i.jsx)(n.code,{children:"true"})," is not supported in version 2.0.0-M4)"]}),"\n",(0,i.jsxs)(n.li,{children:["Supply your ",(0,i.jsx)(n.code,{children:"tenancy"}),", ",(0,i.jsx)(n.code,{children:"user ocid"}),", ",(0,i.jsx)(n.code,{children:"fingerprint"}),", and ",(0,i.jsx)(n.code,{children:"region"})," (these must match the details provided when creating the OCI configuration secret)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h5,{id:"option-2-non-adb-or-manual-configuration",children:"Option 2: Non-ADB or Manual Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Use this option if your database is not an Oracle Autonomous Database in OCI, or you do not want Oracle Database Operator to create the ",(0,i.jsx)(n.code,{children:"tns"})," secret."]}),"\n",(0,i.jsx)(n.p,{children:"Configure the following settings:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Modify or create the ",(0,i.jsx)(n.a,{href:"/microservices-datadriven/obaas/docs/setup/secrets#database-credentials-secret",children:"Database Credentials Secret"})," to include ",(0,i.jsx)(n.code,{children:"dbhost"})," and ",(0,i.jsx)(n.code,{children:"dbport"})," for the database instance"]}),"\n",(0,i.jsxs)(n.li,{children:["Leave ",(0,i.jsx)(n.code,{children:"database.type"})," blank"]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Important"}),": Double-check all values before proceeding. Incorrect values will cause the OBaaS provisioning to fail."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(n.h3,{id:"single-instance-installation",children:"Single Instance Installation"}),"\n",(0,i.jsx)(n.p,{children:"Install the Helm chart using the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'helm --debug install obaas \\\n  --set global.obaasName="obaas-dev" \\\n  --set global.targetNamespace="obaas-dev" \\\n  ./\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"global.obaasName"}),": Sets the OBaaS instance name"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"global.targetNamespace"}),": Specifies the target namespace (optional, only needed to override the default namespace)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--debug"}),": Optional flag that enables verbose output from Helm"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected output:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-log",children:'I0817 13:21:41.363368 5981 warnings.go:110] "Warning: unknown field "spec.serviceName""\nI0817 13:21:41.439521 5981 warnings.go:110] "Warning: unknown field "spec.serviceName""\nI0817 13:21:41.439531 5981 warnings.go:110] "Warning: unknown field "spec.serviceName""\nNAME: obaas\nLAST DEPLOYED: Sun Aug 17 13:21:15 2025\nNAMESPACE: default\nSTATUS: deployed\nREVISION: 1\nTEST SUITE: None\n'})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": You may see warnings as shown above. These can be safely ignored in version 2.0.0-M4."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"multiple-instance-installation",children:"Multiple Instance Installation"}),"\n",(0,i.jsx)(n.p,{children:"When installing multiple OBaaS instances in your cluster, each instance must have unique values for:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Release name"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"obaasName"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"targetNamespace"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example for development instance:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'helm --debug install obaas \\\n  --set global.obaasName="obaas-dev" \\\n  --set global.targetNamespace="obaas-dev" \\\n  ./\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example for production instance:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'helm --debug install obaas-prod \\\n  --set global.obaasName="obaas-prod" \\\n  --set global.targetNamespace="obaas-prod" \\\n  ./\n'})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Important"}),": If you install APISIX in multiple instances, you must set different host names and/or ports for each APISIX ingress."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"verification",children:"Verification"}),"\n",(0,i.jsx)(n.h3,{id:"verify-namespaces",children:"Verify Namespaces"}),"\n",(0,i.jsx)(n.p,{children:"Check that the namespaces have been created:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl get ns\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected output (with component namespace overrides):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"NAME                               STATUS   AGE\nadmin-server                       Active   32s\napisix                             Active   32s\napplication                        Active   32s\nazn-server                         Active   32s\ncert-manager                       Active   33m\ncoherence                          Active   32s\nconductor-server                   Active   32s\nconfig-server                      Active   32s\ndefault                            Active   107m\neureka                             Active   32s\nexternal-secrets                   Active   33m\ningress-nginx                      Active   34m\nkafka                              Active   32s\nkube-node-lease                    Active   107m\nkube-public                        Active   107m\nkube-state-metrics                 Active   33m\nkube-system                        Active   107m\nmetrics-server                     Active   33m\nobaas-admin                        Active   32s\nobservability                      Active   22m\noracle-database-exporter           Active   32s\noracle-database-operator-system    Active   12m\notmm                               Active   32s\n"})}),"\n",(0,i.jsxs)(n.p,{children:["If you did not override component namespaces, all pods will be in the target namespace (e.g., ",(0,i.jsx)(n.code,{children:"obaas-dev"}),")."]}),"\n",(0,i.jsx)(n.h3,{id:"verify-pods",children:"Verify Pods"}),"\n",(0,i.jsx)(n.p,{children:"Check the status of all pods:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl get pod -A\n"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": It takes approximately 5 minutes for all pods to reach ready/running status."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.p,{children:"If the installation fails, verify the following:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["All values in ",(0,i.jsx)(n.code,{children:"values.yaml"})," are correct"]}),"\n",(0,i.jsx)(n.li,{children:"Database credentials and connection information are accurate"}),"\n",(0,i.jsx)(n.li,{children:"OCI configuration (if using ADB-S) matches the secret created earlier"}),"\n",(0,i.jsxs)(n.li,{children:["For multiple instances, ensure unique ",(0,i.jsx)(n.code,{children:"Release name"}),"s, ",(0,i.jsx)(n.code,{children:"obaasName"}),", and ",(0,i.jsx)(n.code,{children:"targetNamespace"})," values"]}),"\n",(0,i.jsx)(n.li,{children:"For multiple APISIX instances, verify different host names and/or ports are configured"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>o,x:()=>l});var s=a(6540);const i={},t=s.createContext(i);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);