"use strict";(globalThis.webpackChunksite=globalThis.webpackChunksite||[]).push([[3398],{7670:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"setup/helm","title":"Helm Chart installation (manual)","description":"Oracle Backend for Microservices and AI (OBaaS) Helm Charts","source":"@site/docs/setup/helm.md","sourceDirName":"setup","slug":"/setup/helm","permalink":"/microservices-datadriven/obaas/docs/setup/helm","draft":false,"unlisted":false,"editUrl":"https://github.com/oracle/microservices-datadriven/tree/main/docs-source/site/docs/setup/helm.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Helm Chart installation (manual)","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Terraform Installation (CLI)","permalink":"/microservices-datadriven/obaas/docs/setup/tf_cli"},"next":{"title":"Setup - OLD","permalink":"/microservices-datadriven/obaas/docs/category/setup---old"}}');var i=s(4848),t=s(8453);const a={title:"Helm Chart installation (manual)",sidebar_position:2},l=void 0,c={},o=[{value:"Oracle Backend for Microservices and AI (OBaaS) Helm Charts",id:"oracle-backend-for-microservices-and-ai-obaas-helm-charts",level:2},{value:"What Gets Deployed",id:"what-gets-deployed",level:3},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Required Tools",id:"required-tools",level:4},{value:"Kubernetes Cluster Requirements",id:"kubernetes-cluster-requirements",level:4},{value:"Database Requirements",id:"database-requirements",level:4},{value:"Directory Structure",id:"directory-structure",level:3},{value:"Quick Start Guide",id:"quick-start-guide",level:3},{value:"Step 1: Install Prerequisites (Once Per Cluster)",id:"step-1-install-prerequisites-once-per-cluster",level:4},{value:"Step 2: Install OBaaS (Multiple Times)",id:"step-2-install-obaas-multiple-times",level:4},{value:"Step 3: Install OBaaS",id:"step-3-install-obaas",level:4},{value:"Step 5: Verify OBaaS Installation",id:"step-5-verify-obaas-installation",level:4},{value:"Architecture",id:"architecture",level:3},{value:"Configuration Options",id:"configuration-options",level:3},{value:"Uninstallation",id:"uninstallation",level:3},{value:"Additional Resources",id:"additional-resources",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"oracle-backend-for-microservices-and-ai-obaas-helm-charts",children:"Oracle Backend for Microservices and AI (OBaaS) Helm Charts"}),"\n",(0,i.jsx)(n.p,{children:"This document describes how to deploy OBaaS to an existing Kubernetes cluster using Helm charts manually."}),"\n",(0,i.jsx)(n.h3,{id:"what-gets-deployed",children:"What Gets Deployed"}),"\n",(0,i.jsx)(n.p,{children:"The OBaaS Helm charts deploy a complete microservices platform including:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Prerequisites Chart"})," (cluster-scoped, install once):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"cert-manager"})," - Automatic TLS certificate management"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"external-secrets"})," - Integration with external secret stores"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"metrics-server"})," - Container resource metrics"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"kube-state-metrics"})," - Kubernetes object metrics"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"strimzi-kafka-operator"})," - Kafka cluster operator"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"OBaaS Chart"})," (namespace-scoped, install per tenant):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ingress-nginx"})," - Namespace-specific ingress controller"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Apache APISIX"})," - API Gateway"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kafka"})," - Event streaming (via Strimzi CRs)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Oracle Coherence"})," - Distributed caching"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Eureka"})," - Service discovery"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Signoz"})," - Observability stack with ClickHouse"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Spring Boot Admin"})," - Application monitoring"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Conductor"})," - Workflow orchestration"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"OTMM"})," - Transaction manager for microservices"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsx)(n.admonition,{title:"Important",type:"warning",children:(0,i.jsx)(n.p,{children:"Ensure all prerequisites are met before starting the deployment."})}),"\n",(0,i.jsx)(n.h4,{id:"required-tools",children:"Required Tools"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Helm"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Verify installation\nhelm version\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"kubectl"})," - Configured with cluster access"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Verify cluster access\nkubectl get nodes\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"kubernetes-cluster-requirements",children:"Kubernetes Cluster Requirements"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kubernetes version"}),": 1.24 or later"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cluster resources"}),": Minimum requirements per OBaaS instance:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"CPU"}),": 8 cores available"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Memory"}),": 16 GB RAM available"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Storage"}),": Dynamic volume provisioning (StorageClass configured)"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Network"}),": LoadBalancer service support (for ingress)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Permissions"}),": Cluster-admin access for prerequisites installation"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"database-requirements",children:"Database Requirements"}),"\n",(0,i.jsx)(n.p,{children:"You must have access to an Oracle Database (19c or later):"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Autonomous Database (ADB-S or ADB-D)"}),"\n",(0,i.jsx)(n.li,{children:"Oracle Database on-premise or cloud"}),"\n",(0,i.jsx)(n.li,{children:"Connection details (host, port, service name)"}),"\n",(0,i.jsx)(n.li,{children:"ADMIN or SYSTEM credentials for schema creation"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"directory-structure",children:"Directory Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tree",children:"helm_v2/\n\u251c\u2500\u2500 obaas-prereqs/     # Cluster-singleton prerequisites (install once per cluster)\n\u2514\u2500\u2500 obaas/             # OBaaS application chart (install N times in different namespaces)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"quick-start-guide",children:"Quick Start Guide"}),"\n",(0,i.jsx)(n.h4,{id:"step-1-install-prerequisites-once-per-cluster",children:"Step 1: Install Prerequisites (Once Per Cluster)"}),"\n",(0,i.jsx)(n.p,{children:"The prerequisites chart contains cluster-scoped singleton components that should only be installed once per cluster."}),"\n",(0,i.jsx)(n.admonition,{title:"Cluster-Scoped Installation",type:"warning",children:(0,i.jsx)(n.p,{children:"Only install prerequisites once per cluster. Installing multiple times will cause conflicts with CRDs (Custom Resource Definitions)."})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Components installed:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"cert-manager"})," - Automatic TLS certificate management for services"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"external-secrets"})," - Synchronizes secrets from external stores (OCI Vault, AWS Secrets Manager, etc.)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"metrics-server"})," - Provides container resource metrics for autoscaling"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"kube-state-metrics"})," - Exposes Kubernetes object metrics for monitoring"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"strimzi-kafka-operator"})," - Manages Kafka clusters via custom resources"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Install prerequisites:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd obaas-prereqs\n\n# Install with default\nhelm upgrade --install obaas-prereqs . -n obaas-system --create-namespace [--values <path_to_custom_values>]\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Verify installation:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check all prerequisites pods are running\nkubectl get pods -n obaas-system\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Expected state"}),": All pods should reach ",(0,i.jsx)(n.code,{children:"Running"})," status within 2-3 minutes."]}),"\n",(0,i.jsx)(n.admonition,{title:"Wait for Prerequisites",type:"tip",children:(0,i.jsx)(n.p,{children:"Wait until all prerequisite pods are running before proceeding to install OBaaS."})}),"\n",(0,i.jsx)(n.h4,{id:"step-2-install-obaas-multiple-times",children:"Step 2: Install OBaaS (Multiple Times)"}),"\n",(0,i.jsx)(n.p,{children:"After prerequisites are installed, you can install the OBaaS chart multiple times in different namespaces for multi-tenancy:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd obaas\n\n# Install for tenant 1\nhelm upgrade --install obaas-tenant1 . -n tenant1 --create-namespace --force-conflicts --values examples/values-tenant1.yaml\n\n# Install for tenant 2\nhelm upgrade --install obaas-tenant2 . -n tenant2 --create-namespace --force-conflicts --values examples/values-tenant2.yaml\n\n# Install for tenant N...\nhelm upgrade --install obaas-tenantN . -n tenantN --create-namespace --force-conflicts --values examples/values-tenantN.yaml\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"Example Configurations",type:"tip",children:(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.code,{children:"obaas/examples/"})," directory for complete example values files for different scenarios."]})}),"\n",(0,i.jsx)(n.h4,{id:"step-3-install-obaas",children:"Step 3: Install OBaaS"}),"\n",(0,i.jsx)(n.p,{children:"After prerequisites are installed and your values file is ready, install OBaaS."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd obaas\n\n# Install for tenant 1\nhelm upgrade --install obaas-tenant1 . -n tenant1 --create-namespace --force-conflicts --values examples/values-tenant1.yaml\n\n# Install for tenant 2\nhelm upgrade --install obaas-tenant2 . -n tenant2 --create-namespace --force-conflicts --values examples/values-tenant2.yaml\n\n# Monitor the installation\nkubectl get pods -n obaas-tenant1 -w\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"First Deployment",type:"tip",children:(0,i.jsx)(n.p,{children:"It may take 5-10 additional minutes for all pods to reach Running state."})}),"\n",(0,i.jsx)(n.h4,{id:"step-5-verify-obaas-installation",children:"Step 5: Verify OBaaS Installation"}),"\n",(0,i.jsx)(n.p,{children:"After installation completes, verify all components are running:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check all pods are running\nkubectl get pods -A\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Expected results:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["All pods in ",(0,i.jsx)(n.code,{children:"Running"})," state"]}),"\n",(0,i.jsx)(n.li,{children:"Services with ClusterIP or LoadBalancer IPs assigned"}),"\n",(0,i.jsx)(n.li,{children:"Ingress configured with your hostname"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"architecture",children:"Architecture"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Why separate charts?"})}),"\n",(0,i.jsx)(n.p,{children:"The two-chart architecture provides flexibility and prevents conflicts:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"obaas-prereqs"}),": Contains cluster-scoped operators and infrastructure that install CRDs (Custom Resource Definitions). These are cluster-wide resources that should only exist once. Installing multiple times would cause:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"CRD version conflicts"}),"\n",(0,i.jsx)(n.li,{children:"Duplicate operator controllers"}),"\n",(0,i.jsx)(n.li,{children:"Resource contention"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"obaas"}),": Contains namespace-scoped resources that can be safely installed multiple times. Each instance:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Operates independently in its own namespace"}),"\n",(0,i.jsx)(n.li,{children:"Can create Kafka clusters via custom resources (managed by the shared Strimzi operator)"}),"\n",(0,i.jsx)(n.li,{children:"Has its own ingress controller and observability stack"}),"\n",(0,i.jsx)(n.li,{children:"Doesn't interfere with other OBaaS instances"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Architecture diagram:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tree",children:"Cluster\n\u251c\u2500\u2500 obaas-system namespace (prerequisites)\n\u2502   \u251c\u2500\u2500 cert-manager\n\u2502   \u251c\u2500\u2500 external-secrets\n\u2502   \u251c\u2500\u2500 metrics-server\n\u2502   \u251c\u2500\u2500 kube-state-metrics\n\u2502   \u2514\u2500\u2500 strimzi-kafka-operator (manages Kafka CRs across all namespaces)\n\u251c\u2500\u2500 tenant1 namespace (OBaaS instance 1)\n\u2502   \u251c\u2500\u2500 ingress-nginx\n\u2502   \u251c\u2500\u2500 APISIX, Eureka, Coherence, etc.\n\u2502   \u251c\u2500\u2500 Kafka cluster (CR managed by Strimzi)\n\u2502   \u2514\u2500\u2500 Signoz + ClickHouse\n\u2514\u2500\u2500 tenant2 namespace (OBaaS instance 2)\n    \u251c\u2500\u2500 ingress-nginx\n    \u251c\u2500\u2500 APISIX, Eureka, Coherence, etc.\n    \u251c\u2500\u2500 Kafka cluster (CR managed by Strimzi)\n    \u2514\u2500\u2500 Signoz + ClickHouse\n"})}),"\n",(0,i.jsx)(n.h3,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,i.jsx)(n.p,{children:"See individual chart directories for detailed configuration options:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"http://TBD",children:"obaas-prereqs/README.md"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"http://TBD",children:"obaas/examples/"})," - Example configurations"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"uninstallation",children:"Uninstallation"}),"\n",(0,i.jsx)(n.p,{children:"To remove OBaaS from your cluster:"}),"\n",(0,i.jsx)(n.admonition,{title:"Data Loss",type:"warning",children:(0,i.jsx)(n.p,{children:"Uninstalling will delete all resources. Ensure you have backups of any important data before proceeding."})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Step 1: Uninstall OBaaS instances first:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Uninstall each OBaaS instance\nhelm uninstall obaas -n obaas-prod\nhelm uninstall obaas-tenant1 -n tenant1\nhelm uninstall obaas-tenant2 -n tenant2\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Step 2: Delete namespaces (optional):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl delete namespace obaas-prod tenant1 tenant2\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Step 3: Uninstall prerequisites (only if removing entirely):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm uninstall obaas-prereqs -n obaas-system\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"Warning",type:"danger",children:(0,i.jsxs)(n.p,{children:["Uninstalling prerequisites will affect ",(0,i.jsx)(n.strong,{children:"all"})," OBaaS instances in the cluster. Only do this if you're removing OBaaS completely."]})}),"\n",(0,i.jsx)(n.h3,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Chart Documentation"}),": See ",(0,i.jsx)(n.code,{children:"obaas-prereqs/README.md"})," and ",(0,i.jsx)(n.code,{children:"obaas/README.md"})," for detailed chart documentation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Example Configurations"}),": Check ",(0,i.jsx)(n.code,{children:"obaas/examples/"})," directory for various deployment scenarios"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Helm Values Reference"}),": Review ",(0,i.jsx)(n.code,{children:"obaas/values.yaml"})," for all available configuration options"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>l});var r=s(6540);const i={},t=r.createContext(i);function a(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);