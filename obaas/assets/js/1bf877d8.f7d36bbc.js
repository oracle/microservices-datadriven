"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[234],{8453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>i});var o=t(6540);const r={},s=o.createContext(r);function c(e){const n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),o.createElement(s.Provider,{value:n},e.children)}},9387:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>u,frontMatter:()=>c,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"platform/conductor","title":"Conductor Workflow Orchestration","description":"Conductor","source":"@site/docs/platform/conductor.md","sourceDirName":"platform","slug":"/platform/conductor","permalink":"/microservices-datadriven/obaas/docs/platform/conductor","draft":false,"unlisted":false,"editUrl":"https://github.com/oracle/microservices-datadriven/tree/main/docs-source/site/docs/platform/conductor.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Conductor Workflow Orchestration","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Apache APISIX","permalink":"/microservices-datadriven/obaas/docs/platform/apisix"},"next":{"title":"Oracle Database Metrics Exporter","permalink":"/microservices-datadriven/obaas/docs/platform/dbexporter"}}');var r=t(4848),s=t(8453);const c={title:"Conductor Workflow Orchestration",sidebar_position:2},i=void 0,a={},l=[{value:"Conductor",id:"conductor",level:2},{value:"Installing Conductor",id:"installing-conductor",level:3},{value:"API Specification",id:"api-specification",level:3},{value:"Accessing Conductor APIs",id:"accessing-conductor-apis",level:3},{value:"Testing the Conductor service",id:"testing-the-conductor-service",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"conductor",children:"Conductor"}),"\n",(0,r.jsx)(n.admonition,{type:"important",children:(0,r.jsx)(n.p,{children:"Conductor will be replaced with Oracle Transaction Manager for Microservices, which will include the Conductor Server as a component of the product"})}),"\n",(0,r.jsx)(n.p,{children:"Conductor is a workflow orchestration platform, originally developed at Netflix, designed to coordinate long-running, distributed workflows across microservices by defining tasks, dependencies, and retries, while providing scalability, fault tolerance, and operational visibility through a centralized engine."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://docs.conductor-oss.org",children:"Conductor OSS Documentation"})}),"\n",(0,r.jsx)(n.h3,{id:"installing-conductor",children:"Installing Conductor"}),"\n",(0,r.jsxs)(n.p,{children:["Conductor will be installed if the ",(0,r.jsx)(n.code,{children:"conductor-server.enabled"})," is set to ",(0,r.jsx)(n.code,{children:"true"})," in the ",(0,r.jsx)(n.code,{children:"values.yaml"})," file. The default namespace for Conductor is ",(0,r.jsx)(n.code,{children:"conductor-server"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"api-specification",children:"API Specification"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://docs.conductor-oss.org/documentation/api/index.html",children:"API Specification"})}),"\n",(0,r.jsx)(n.h3,{id:"accessing-conductor-apis",children:"Accessing Conductor APIs"}),"\n",(0,r.jsxs)(n.p,{children:["To access the Conductor APIs, use kubectl port-forward to create a secure channel to ",(0,r.jsx)(n.code,{children:"service/conductor-server"}),". Run the following command to establish the secure tunnel (replace the example namespace ",(0,r.jsx)(n.code,{children:"obaas-dev"})," with the namespace where the Conductor Server is deployed):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"kubectl port-forward -n obaas-dev svc/conductor-server 8080\n"})}),"\n",(0,r.jsx)(n.h3,{id:"testing-the-conductor-service",children:"Testing the Conductor service"}),"\n",(0,r.jsxs)(n.p,{children:["You can test the Conductor service by running the sample workflow provided. Save the content into a file called ",(0,r.jsx)(n.code,{children:"first_simple_workflow.json"})," and then execute the following command:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"curl -X POST 'http://localhost:8080/api/metadata/workflow' \\\n-H 'Content-Type: application/json' \\\n-d @first_sample_workflow.json\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:' \n    {\n        "name": "first_sample_workflow",\n        "description": "First Sample Workflow",\n        "version": 1,\n        "tasks": [\n            {\n                "name": "get_population_data",\n                "taskReferenceName": "get_population_data",\n                "inputParameters": {\n                    "http_request": {\n                        "uri": "https://restcountries.com/v3.1/name/united%20states?fields=name,population",\n                        "method": "GET"\n                    }\n                },\n                "type": "HTTP"\n            }\n        ],\n        "inputParameters": [],\n        "outputParameters": {\n            "data": "${get_population_data.output.response.body.data}",\n            "source": "${get_population_data.output.response.body.source}"\n        },\n        "schemaVersion": 2,\n        "restartable": true,\n        "workflowStatusListenerEnabled": false,\n        "ownerEmail": "example@email.com",\n        "timeoutPolicy": "ALERT_ONLY",\n        "timeoutSeconds": 0\n    }\n\n'})}),"\n",(0,r.jsx)(n.p,{children:"Execute the workflow by using this command and capture the Workflow ID:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"WORKFLOW_ID=$(curl -s -X POST 'http://localhost:8080/api/workflow/first_sample_workflow' \\\n-H 'Content-Type: application/json' \\\n-d '{}' | tr -d '\"')\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Check the Workflow IS, should return a string similar to this ",(0,r.jsx)(n.code,{children:"46cbbaef-7133-451b-9334-2ccfc4e270c5"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'echo "Workflow ID: $WORKFLOW_ID"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Check status of the Workflow, will return the data from ",(0,r.jsx)(n.a,{href:"https://restcountries.com/v3.1/name/united%20states?fields=name,population",children:"https://restcountries.com/v3.1/name/united%20states?fields=name,population"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'curl -s -X GET "http://localhost:8080/api/workflow/$WORKFLOW_ID" | jq\n'})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);