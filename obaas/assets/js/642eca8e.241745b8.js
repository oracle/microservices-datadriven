"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[491],{8327:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"setup/obaas","title":"Prepare and Install the OBaaS Helm chart","description":"Prepare and Install the OBaaS Helm chart","source":"@site/docs/setup/obaas.md","sourceDirName":"setup","slug":"/setup/obaas","permalink":"/microservices-datadriven/obaas/docs/setup/obaas","draft":false,"unlisted":false,"editUrl":"https://github.com/oracle/microservices-datadriven/tree/main/docs-source/site/docs/setup/obaas.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"title":"Prepare and Install the OBaaS Helm chart","sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"Prepare and Install the OBaaS Database Helm chart","permalink":"/microservices-datadriven/obaas/docs/setup/database"},"next":{"title":"Deploy","permalink":"/microservices-datadriven/obaas/docs/category/deploy"}}');var t=s(4848),r=s(8453);const o={title:"Prepare and Install the OBaaS Helm chart",sidebar_position:10},i=void 0,l={},c=[{value:"Prepare and Install the OBaaS Helm chart",id:"prepare-and-install-the-obaas-helm-chart",level:2}];function d(e){const n={code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"prepare-and-install-the-obaas-helm-chart",children:"Prepare and Install the OBaaS Helm chart"}),"\n",(0,t.jsxs)(n.p,{children:["For this step, you will need the ",(0,t.jsx)(n.strong,{children:"obaas"})," directory in which you will see the following files:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd obaas/\nls\nChart.yaml LICENSE README.md crds templates values.yaml\n"})}),"\n",(0,t.jsxs)(n.p,{children:["You must edit the ",(0,t.jsx)(n.strong,{children:"values.yaml"})," file as follows:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["If you are using a private repository, you must update each ",(0,t.jsx)(n.strong,{children:"image"})," entry to point to your private repository instead of the public repositories."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Optional. Each component listed in the file (e.g., apisix, kafka, coherence, etc.) has an ",(0,t.jsx)(n.strong,{children:"enabled: true"})," entry. If you want to omit a component, you must change the setting to ",(0,t.jsx)(n.strong,{children:"false"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["(Optional) If you want to install any components in this chart into their own separate namespace, you can override the global namespace by setting a value in the ",(0,t.jsx)(n.strong,{children:"namespace"})," property inside the section for that component."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["You must provide the OCID of your ADB-S instance in the setting ",(0,t.jsx)(n.strong,{children:"database.oci_db.ocid"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["You must update the values in the ",(0,t.jsx)(n.strong,{children:"database.oci_config"})," the section as follows:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.strong,{children:"oke"})," setting must be ",(0,t.jsx)(n.strong,{children:"false"}),". Setting this to true is not supported in 2.0.0-M3."]}),"\n",(0,t.jsxs)(n.li,{children:["Supply your ",(0,t.jsx)(n.strong,{children:"tenancy"}),", ",(0,t.jsx)(n.strong,{children:"user"})," ",(0,t.jsx)(n.strong,{children:"ocid"}),", ",(0,t.jsx)(n.strong,{children:"fingerprint"})," and ",(0,t.jsx)(n.strong,{children:"region"}),". These must match the details you provided when you created the OCI configuration secret earlier."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Important note"}),": Please pause to double check all of the values are correct. If there are any errors here, the OBaaS provisioning will fail."]}),"\n",(0,t.jsxs)(n.p,{children:["Install the Helm chart using the following command (The ",(0,t.jsx)(n.code,{children:"--debug"})," flag is optional and enables verbose output from Helm)."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'global.obaasName="obaas-dev" - Sets the OBaaS instance name.'}),"\n",(0,t.jsxs)(n.li,{children:['global.targetNamespace="obaas-dev" - Specifies the target namespace (',(0,t.jsx)(n.em,{children:"OPTIONAL"}),", only needed if you want to override the default namespace)."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": If you are installing multiple OBaaS instances in your cluster, each one MUST have a different release name, ",(0,t.jsx)(n.code,{children:"obaasName"})," and ",(0,t.jsx)(n.code,{children:"targetNamespace"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'helm --debug install obaas --set global.obaasName="obaas-dev" --set global.targetNamespace="obaas-dev" ./\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-log",children:'I0817 13:21:41.363368 5981 warnings.go:110\\] "Warning: unknown field\n"spec.serviceName""\nI0817 13:21:41.439521 5981 warnings.go:110\\] "Warning: unknown field\n"spec.serviceName""\nI0817 13:21:41.439531 5981 warnings.go:110\\] "Warning: unknown field\n"spec.serviceName""\nNAME: obaas\nLAST DEPLOYED: Sun Aug 17 13:21:15 2025\nNAMESPACE: default\nSTATUS: deployed\nREVISION: 1\nTEST SUITE: None\n'})}),"\n",(0,t.jsx)(n.p,{children:"You may see some warnings, as shown above, and they can be ignored in 2.0.0-M3."}),"\n",(0,t.jsxs)(n.p,{children:["If you overrode the component namespaces, you will now see several new namespaces as requested (see example below). Otherwise all of the pods will be in the ",(0,t.jsx)(n.strong,{children:"obaas-dev"})," namespace (or whatever name you chose):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl get ns\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-log",children:"NAME                               STATUS AGE\nadmin-server                       Active 32s\napisix                             Active 32s\napplication                        Active 32s\nazn-server                         Active 32s\ncert-manager                       Active 33m\ncoherence                          Active 32s\nconductor-server                   Active 32s\nconfig-server                      Active 32s\ndefault                            Active 107m\neureka                             Active 32s\nexternal-secrets                   Active 33m\ningress-nginx                      Active 34m\nkafka                              Active 32s\nkube-node-lease                    Active 107m\nkube-public                        Active 107m\nkube-state-metrics                 Active 33m\nkube-system                        Active 107m\nmetrics-server                     Active 33m\nobaas-admin                        Active 32s\nobservability                      Active 22m\noracle-database-exporter           Active 32s\noracle-database-operator-system    Active 12m\notmm                               Active 32s\n"})}),"\n",(0,t.jsx)(n.p,{children:"And many new pods. Note that these will take about 5 minutes for them all to get to ready/running status:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl get pod -A\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": If you are installing multiple OBaaS instances in your cluster, each one MUST have a different release name, ",(0,t.jsx)(n.code,{children:"obaasName"})," and ",(0,t.jsx)(n.code,{children:"targetNamespace"}),". For example (The ",(0,t.jsx)(n.code,{children:"--debug"})," flag is optional and enables verbose output from Helm):"]}),"\n",(0,t.jsx)(n.p,{children:"For obaas-dev:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'helm --debug install obaas --set global.obaasName="obaas-dev" --set global.targetNamespace="obaas-dev" ./\n'})}),"\n",(0,t.jsx)(n.p,{children:"For obaas-prod:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'helm --debug install obaas --set global.obaasName="obaas-prod" --set global targetNamespace="obaas-prod" ./\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": You MUST set different host names and/or ports for the APISIX ingress if you choose to install APISIX in both instances."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>i});var a=s(6540);const t={},r=a.createContext(t);function o(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);