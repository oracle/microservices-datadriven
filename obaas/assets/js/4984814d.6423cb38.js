"use strict";(globalThis.webpackChunksite=globalThis.webpackChunksite||[]).push([[8151],{7731:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"setup/tf_cli","title":"Terraform Installation (CLI)","description":"Oracle Backend for Microservices and AI - Terraform for OCI","source":"@site/docs/setup/tf_cli.md","sourceDirName":"setup","slug":"/setup/tf_cli","permalink":"/microservices-datadriven/obaas/docs/setup/tf_cli","draft":false,"unlisted":false,"editUrl":"https://github.com/oracle/microservices-datadriven/tree/main/docs-source/site/docs/setup/tf_cli.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Terraform Installation (CLI)","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Setup with Terraform and Helm","permalink":"/microservices-datadriven/obaas/docs/setup/"},"next":{"title":"Helm Chart installation (manual)","permalink":"/microservices-datadriven/obaas/docs/setup/helm"}}');var i=s(4848),t=s(8453);const d={title:"Terraform Installation (CLI)",sidebar_position:1},l=void 0,o={},c=[{value:"Oracle Backend for Microservices and AI - Terraform for OCI",id:"oracle-backend-for-microservices-and-ai---terraform-for-oci",level:2},{value:"What Gets Deployed",id:"what-gets-deployed",level:3},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Required Tools",id:"required-tools",level:4},{value:"OCI Tenancy Requirements",id:"oci-tenancy-requirements",level:4},{value:"Quick Start",id:"quick-start",level:3},{value:"Step 1: Initialize Terraform",id:"step-1-initialize-terraform",level:4},{value:"Step 2: Choose and Configure Your Deployment",id:"step-2-choose-and-configure-your-deployment",level:4},{value:"Step 3: Configure OCI Credentials",id:"step-3-configure-oci-credentials",level:4},{value:"Step 4: Review the Deployment Plan",id:"step-4-review-the-deployment-plan",level:4},{value:"Step 5: Deploy",id:"step-5-deploy",level:4},{value:"Step 6: Configure kubectl Access",id:"step-6-configure-kubectl-access",level:4},{value:"Step 7: Access OBaaS Services",id:"step-7-access-obaas-services",level:4},{value:"Configuration Options",id:"configuration-options",level:3},{value:"General Settings",id:"general-settings",level:4},{value:"Database Options",id:"database-options",level:4},{value:"Option 1: New Autonomous Database (Default)",id:"option-1-new-autonomous-database-default",level:5},{value:"Option 2: Bring Your Own Autonomous Database (ADB-S)",id:"option-2-bring-your-own-autonomous-database-adb-s",level:5},{value:"Option 3: Bring Your Own Other Database",id:"option-3-bring-your-own-other-database",level:5},{value:"Kubernetes Options",id:"kubernetes-options",level:4},{value:"Compute Options",id:"compute-options",level:4},{value:"Network Options",id:"network-options",level:4},{value:"Load Balancer Options",id:"load-balancer-options",level:4},{value:"AI Optimizer",id:"ai-optimizer",level:4},{value:"Examples",id:"examples",level:3},{value:"Running Tests",id:"running-tests",level:4},{value:"Outputs",id:"outputs",level:3},{value:"OCI Resource Manager (ORM)",id:"oci-resource-manager-orm",level:3},{value:"Directory Structure",id:"directory-structure",level:3},{value:"Security Best Practices",id:"security-best-practices",level:3},{value:"Cleanup",id:"cleanup",level:3}];function a(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"oracle-backend-for-microservices-and-ai---terraform-for-oci",children:"Oracle Backend for Microservices and AI - Terraform for OCI"}),"\n",(0,i.jsx)(n.p,{children:"This document describes how to setup OBaaS using the Terraform CLI."}),"\n",(0,i.jsx)(n.h3,{id:"what-gets-deployed",children:"What Gets Deployed"}),"\n",(0,i.jsx)(n.p,{children:"This Terraform configuration deploys a complete Oracle Backend for Microservices and AI environment including:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Oracle Kubernetes Engine (OKE)"})," cluster with worker nodes","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"OBaaS System Namespace"})," The OBaaS Cluster-singleton prerequisites. Defaults to ",(0,i.jsx)(n.code,{children:"obaas-system"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"OBaaS Namespace"})," OBaaS platform components (APISIX, Kafka, Eureka, Observability stack, etc.). Defaults to the value of ",(0,i.jsx)(n.code,{children:"label_prefix"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Autonomous Database"})," (or connects to your existing database)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Load Balancer"})," for ingress traffic"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Network infrastructure"})," (VCN, subnets, security lists, route tables)"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Optional: AI Optimizer and Toolkit"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsx)(n.admonition,{title:"Important",type:"warning",children:(0,i.jsx)(n.p,{children:"Ensure all prerequisites are met before starting the deployment to avoid errors."})}),"\n",(0,i.jsx)(n.h4,{id:"required-tools",children:"Required Tools"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Terraform"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Verify installation\nterraform version\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"OCI CLI"})," - Configured with API key authentication"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Verify OCI CLI is configured\noci os ns get\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"oci-tenancy-requirements",children:"OCI Tenancy Requirements"}),"\n",(0,i.jsx)(n.p,{children:"Verify your tenancy has sufficient quotas for:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Compute"}),": At least 6 OCPUs for VM.Standard.E4/E5.Flex shapes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"OKE"}),": Ability to create OKE clusters"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Autonomous Database"}),": 2 ECPU minimum (unless using existing database)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Networking"}),": VCN, subnets, and flexible load balancer (10-100 Mbps)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Storage"}),": Block volumes for persistent storage"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{title:"Checking Quotas",type:"tip",children:(0,i.jsxs)(n.p,{children:["Navigate to ",(0,i.jsx)(n.strong,{children:"Governance & Administration \u2192 Tenancy Management \u2192 Limits, Quotas and Usage"})," in OCI Console to verify your quotas."]})}),"\n",(0,i.jsx)(n.h3,{id:"quick-start",children:"Quick Start"}),"\n",(0,i.jsx)(n.h4,{id:"step-1-initialize-terraform",children:"Step 1: Initialize Terraform"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"terraform init\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Expected output"}),": Terraform will download required providers (OCI provider) and initialize the backend."]}),"\n",(0,i.jsx)(n.h4,{id:"step-2-choose-and-configure-your-deployment",children:"Step 2: Choose and Configure Your Deployment"}),"\n",(0,i.jsx)(n.p,{children:"Copy an example configuration based on your needs:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Option A: New Autonomous Database (recommended for new deployments)\ncp examples/k8s-new-adb.tfvars terraform.tfvars\n\n# Option B: Bring your own existing database\ncp examples/k8s-byo-other-db.tfvars terraform.tfvars\n"})}),"\n",(0,i.jsx)(n.h4,{id:"step-3-configure-oci-credentials",children:"Step 3: Configure OCI Credentials"}),"\n",(0,i.jsxs)(n.p,{children:["Edit ",(0,i.jsx)(n.code,{children:"terraform.tfvars"})," with your OCI credentials:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hcl",children:'# Required: OCI Authentication\ntenancy_ocid     = "ocid1.tenancy.oc1..aaa..."      # From OCI Console\ncompartment_ocid = "ocid1.compartment.oc1..aaa..."  # Target compartment\nuser_ocid        = "ocid1.user.oc1..aaa..."         # Your user OCID\nfingerprint      = "xx:xx:xx:xx:..."                # API key fingerprint\nprivate_key_path = "~/.oci/oci_api_key.pem"         # Path to private key\nregion           = "us-phoenix-1"                   # OCI region\n\n# Optional: Customize deployment\nlabel_prefix     = "myapp"                          # Max 12 characters\n'})}),"\n",(0,i.jsx)(n.admonition,{title:"Finding Your OCIDs",type:"tip",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tenancy OCID"}),": OCI Console \u2192 Profile Icon \u2192 Tenancy"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Compartment OCID"}),": Identity & Security \u2192 Compartments \u2192 Select compartment"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"User OCID"}),": Identity & Security \u2192 Users \u2192 Your user"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Fingerprint"}),": Identity & Security \u2192 Users \u2192 Your user \u2192 API Keys"]}),"\n"]})}),"\n",(0,i.jsx)(n.h4,{id:"step-4-review-the-deployment-plan",children:"Step 4: Review the Deployment Plan"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"terraform plan\n"})}),"\n",(0,i.jsx)(n.p,{children:"Review the resources that will be created."}),"\n",(0,i.jsx)(n.h4,{id:"step-5-deploy",children:"Step 5: Deploy"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"terraform apply\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Type ",(0,i.jsx)(n.code,{children:"yes"})," when prompted. Deployment takes approximately 30-45 minutes."]}),"\n",(0,i.jsx)(n.admonition,{title:"During Deployment",type:"note",children:(0,i.jsx)(n.p,{children:"You'll see various resources being created. The OKE cluster and ADB provisioning take the longest."})}),"\n",(0,i.jsx)(n.h4,{id:"step-6-configure-kubectl-access",children:"Step 6: Configure kubectl Access"}),"\n",(0,i.jsx)(n.p,{children:"After deployment completes, configure kubectl to access your cluster:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# The output will show the exact command. Example:\noci ce cluster create-kubeconfig \\\n  --cluster-id ocid1.cluster.oc1.phx... \\\n  --region us-phoenix-1 \\\n  --token-version 2.0.0 \\\n  --kube-endpoint PUBLIC_ENDPOINT\n  --file $HOME/.kube/config \\\n  --with-auth-context \\\n  --profile DEFAULT\n\n# Verify access\nkubectl get nodes\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"First Deployment",type:"tip",children:(0,i.jsxs)(n.p,{children:["It may take 5-10 additional minutes after ",(0,i.jsx)(n.code,{children:"terraform apply"})," completes for all pods to reach Running state."]})}),"\n",(0,i.jsx)(n.h4,{id:"step-7-access-obaas-services",children:"Step 7: Access OBaaS Services"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# View deployed services\nkubectl get svc -A\n\n# If AI Optimizer was deployed (deploy_optimizer = true)\necho "Optimizer UI: $(terraform output -raw optimizer_client_url)"\necho "Optimizer API: $(terraform output -raw optimizer_server_url)"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,i.jsx)(n.h4,{id:"general-settings",children:"General Settings"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Variable"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Default"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tenancy_ocid"})}),(0,i.jsx)(n.td,{children:"OCI Tenancy OCID"}),(0,i.jsx)(n.td,{children:"Required"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"compartment_ocid"})}),(0,i.jsx)(n.td,{children:"Compartment for resources"}),(0,i.jsx)(n.td,{children:"Required"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"region"})}),(0,i.jsx)(n.td,{children:"OCI Region"}),(0,i.jsx)(n.td,{children:"Required"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"label_prefix"})}),(0,i.jsx)(n.td,{children:"Prefix for resource names (max 12 chars)"}),(0,i.jsx)(n.td,{children:"Auto-generated"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"label_prefix"})," determines the name of the namespace where the OBaaS components will be installed. ",(0,i.jsx)(n.strong,{children:"WHAT ELSE??"})]}),"\n",(0,i.jsx)(n.h4,{id:"database-options",children:"Database Options"}),"\n",(0,i.jsx)(n.p,{children:"Choose the database configuration that fits your needs:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Option"}),(0,i.jsx)(n.th,{children:"Use Case"}),(0,i.jsx)(n.th,{children:"When to Choose"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"New ADB"})}),(0,i.jsx)(n.td,{children:"New deployments"}),(0,i.jsx)(n.td,{children:"You don't have an existing database. Best for getting started."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"BYO ADB-S"})}),(0,i.jsx)(n.td,{children:"Existing Autonomous DB"}),(0,i.jsx)(n.td,{children:"You have an existing Autonomous Database you want to reuse."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"BYO Other DB"})}),(0,i.jsx)(n.td,{children:"Existing Oracle DB"}),(0,i.jsx)(n.td,{children:"You have an on-premise or other Oracle Database (19c+)."})]})]})]}),"\n",(0,i.jsx)(n.h5,{id:"option-1-new-autonomous-database-default",children:"Option 1: New Autonomous Database (Default)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Recommended for"}),": First-time deployments, development, and testing."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hcl",children:'# Leave byo_db_type empty (default)\nadb_ecpu_core_count         = 2    # Minimum for development, 4+ for production\nadb_data_storage_size_in_gb = 20   # Adjust based on needs\nadb_license_model           = "LICENSE_INCLUDED"  # or "BRING_YOUR_OWN_LICENSE"\nadb_networking              = "PRIVATE_ENDPOINT_ACCESS"  # Recommended for security\n'})}),"\n",(0,i.jsx)(n.h5,{id:"option-2-bring-your-own-autonomous-database-adb-s",children:"Option 2: Bring Your Own Autonomous Database (ADB-S)"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Recommended for"}),": Reusing an existing Autonomous Database instance."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hcl",children:'byo_db_type     = "ADB-S"\nbyo_db_password = "your_admin_password"  # ADMIN user password\nbyo_adb_ocid    = "ocid1.autonomousdatabase.oc1..."\n'})}),"\n",(0,i.jsx)(n.h5,{id:"option-3-bring-your-own-other-database",children:"Option 3: Bring Your Own Other Database"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Recommended for"}),": Connecting to an existing Oracle Database (on-premise or cloud)."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hcl",children:'byo_db_type     = "OTHER"\nbyo_db_password = "your_system_password"  # SYSTEM user password\nbyo_odb_host    = "db-host.example.com"\nbyo_odb_port    = 1521\nbyo_odb_service = "SERVICENAME"\n'})}),"\n",(0,i.jsx)(n.admonition,{title:"Requirements",type:"note",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Oracle Database 19c or later"}),"\n",(0,i.jsx)(n.li,{children:"Network connectivity from OKE cluster to database"}),"\n",(0,i.jsx)(n.li,{children:"SYSTEM user access for schema creation"}),"\n"]})}),"\n",(0,i.jsx)(n.h4,{id:"kubernetes-options",children:"Kubernetes Options"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Variable"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Default"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"k8s_cpu_node_pool_size"})}),(0,i.jsx)(n.td,{children:"Number of CPU worker nodes"}),(0,i.jsx)(n.td,{children:"3"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"k8s_api_is_public"})}),(0,i.jsx)(n.td,{children:"Expose K8s API publicly"}),(0,i.jsx)(n.td,{children:"true"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"k8s_api_endpoint_allowed_cidrs"})}),(0,i.jsx)(n.td,{children:"CIDRs allowed to access K8s API"}),(0,i.jsx)(n.td,{children:'"0.0.0.0/0"'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"k8s_node_pool_gpu_deploy"})}),(0,i.jsx)(n.td,{children:"Deploy GPU node pool"}),(0,i.jsx)(n.td,{children:"false"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"k8s_gpu_node_pool_size"})}),(0,i.jsx)(n.td,{children:"Number of GPU worker nodes"}),(0,i.jsx)(n.td,{children:"1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"k8s_run_cfgmgt"})}),(0,i.jsx)(n.td,{children:"Run configuration management"}),(0,i.jsx)(n.td,{children:"true"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"k8s_use_cluster_addons"})}),(0,i.jsx)(n.td,{children:"Install OKE cluster add-ons"}),(0,i.jsx)(n.td,{children:"true"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"k8s_byo_ocir_url"})}),(0,i.jsx)(n.td,{children:"BYO Oracle Container Registry URL"}),(0,i.jsx)(n.td,{children:'""'})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"compute-options",children:"Compute Options"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Variable"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Default"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"compute_cpu_shape"})}),(0,i.jsx)(n.td,{children:"CPU compute shape"}),(0,i.jsx)(n.td,{children:"VM.Standard.E5.Flex"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"compute_cpu_ocpu"})}),(0,i.jsx)(n.td,{children:"OCPUs per CPU worker"}),(0,i.jsx)(n.td,{children:"2"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"compute_gpu_shape"})}),(0,i.jsx)(n.td,{children:"GPU compute shape"}),(0,i.jsx)(n.td,{children:"VM.GPU.A10.1"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"network-options",children:"Network Options"}),"\n",(0,i.jsx)(n.p,{children:"By default, a new VCN with public and private subnets is created. To use existing networking:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hcl",children:'byo_vcn_ocid            = "ocid1.vcn.oc1..."\nbyo_public_subnet_ocid  = "ocid1.subnet.oc1..."\nbyo_private_subnet_ocid = "ocid1.subnet.oc1..."\n'})}),"\n",(0,i.jsx)(n.h4,{id:"load-balancer-options",children:"Load Balancer Options"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Variable"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Default"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"lb_min_shape"})}),(0,i.jsx)(n.td,{children:"Minimum bandwidth (Mbps)"}),(0,i.jsx)(n.td,{children:"10"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"lb_max_shape"})}),(0,i.jsx)(n.td,{children:"Maximum bandwidth (Mbps)"}),(0,i.jsx)(n.td,{children:"10"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"client_allowed_cidrs"})}),(0,i.jsx)(n.td,{children:"CIDRs allowed for client access"}),(0,i.jsx)(n.td,{children:'"0.0.0.0/0"'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"server_allowed_cidrs"})}),(0,i.jsx)(n.td,{children:"CIDRs allowed for server API access"}),(0,i.jsx)(n.td,{children:'"0.0.0.0/0"'})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"ai-optimizer",children:"AI Optimizer"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Variable"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Default"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"deploy_optimizer"})}),(0,i.jsx)(n.td,{children:"Deploy AI Optimizer and Toolkit"}),(0,i.jsx)(n.td,{children:"false"})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["See the ",(0,i.jsx)(n.code,{children:"examples"})," directory for complete configuration examples:"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"File"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"k8s-new-adb.tfvars"})}),(0,i.jsx)(n.td,{children:"Kubernetes deployment with new Autonomous Database"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"k8s-byo-other-db.tfvars"})}),(0,i.jsx)(n.td,{children:"Kubernetes deployment with bring-your-own database"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"running-tests",children:"Running Tests"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"examples/manual-test.sh"})," script validates configurations using your OCI credentials:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Uses ~/.oci/config [DEFAULT] profile\n./examples/manual-test.sh\n\n# Use a specific profile\n./examples/manual-test.sh MYPROFILE\n"})}),"\n",(0,i.jsx)(n.h3,{id:"outputs",children:"Outputs"}),"\n",(0,i.jsx)(n.p,{children:"After successful deployment:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Output"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"app_name"})}),(0,i.jsx)(n.td,{children:"Application label/namespace"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"app_version"})}),(0,i.jsx)(n.td,{children:"Deployed application version"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"optimizer_client_url"})}),(0,i.jsx)(n.td,{children:"AI Optimizer web UI URL"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"optimizer_server_url"})}),(0,i.jsx)(n.td,{children:"AI Optimizer API URL"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"kubeconfig_cmd"})}),(0,i.jsx)(n.td,{children:"Command to generate kubeconfig"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"oci-resource-manager-orm",children:"OCI Resource Manager (ORM)"}),"\n",(0,i.jsxs)(n.p,{children:["This configuration is compatible with OCI Resource Manager for deployment via the OCI Console. The ",(0,i.jsx)(n.code,{children:"schema.yaml"})," file defines the ORM form layout."]}),"\n",(0,i.jsx)(n.h3,{id:"directory-structure",children:"Directory Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tree",children:".\n\u251c\u2500\u2500 README.md                 # README\n\u251c\u2500\u2500 main.tf                   # Core resources (LB, ADB)\n\u251c\u2500\u2500 variables.tf              # Root-level variables\n\u251c\u2500\u2500 output.tf                 # Root-level outputs\n\u251c\u2500\u2500 locals.tf                 # Local values\n\u251c\u2500\u2500 provider.tf               # Provider configuration\n\u251c\u2500\u2500 versions.tf               # Version constraints\n\u251c\u2500\u2500 data.tf                   # Data sources\n\u251c\u2500\u2500 nsgs.tf                   # Network Security Groups\n\u251c\u2500\u2500 module_network.tf         # Network module invocation\n\u251c\u2500\u2500 module_kubernetes.tf      # Kubernetes module invocation\n\u251c\u2500\u2500 schema.yaml               # OCI ORM schema\n\u251c\u2500\u2500 examples/                 # Example tfvars files\n\u2502   \u251c\u2500\u2500 README.md\n\u2502   \u251c\u2500\u2500 k8s-new-adb.tfvars\n\u2502   \u251c\u2500\u2500 k8s-byo-other-db.tfvars\n\u2502   \u2514\u2500\u2500 manual-test.sh\n\u251c\u2500\u2500 modules/\n\u2502   \u251c\u2500\u2500 kubernetes/           # OKE cluster and configuration\n\u2502   \u2514\u2500\u2500 network/              # VCN, subnets, gateways\n\u2514\u2500\u2500 cfgmgt/                   # Configuration management scripts\n"})}),"\n",(0,i.jsx)(n.h3,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,i.jsx)(n.admonition,{title:"Security Recommendations",type:"warning"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Restrict API Access"}),": Change ",(0,i.jsx)(n.code,{children:"k8s_api_endpoint_allowed_cidrs"})," from ",(0,i.jsx)(n.code,{children:'"0.0.0.0/0"'})," to your specific IP ranges:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hcl",children:'k8s_api_endpoint_allowed_cidrs = "203.0.113.0/24"  # Your IP range\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use Private Database Access"}),": Set ",(0,i.jsx)(n.code,{children:'adb_networking = "PRIVATE_ENDPOINT_ACCESS"'})," for production deployments"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Limit Load Balancer Access"}),": Configure ",(0,i.jsx)(n.code,{children:"client_allowed_cidrs"})," to restrict who can access your services:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hcl",children:'client_allowed_cidrs = "203.0.113.0/24"  # Your allowed clients\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"cleanup",children:"Cleanup"}),"\n",(0,i.jsx)(n.p,{children:"To remove all deployed resources:"}),"\n",(0,i.jsx)(n.admonition,{title:"Data Loss",type:"warning",children:(0,i.jsx)(n.p,{children:"This will permanently delete all resources including the database (if created by Terraform). Ensure you have backups of any important data."})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Preview what will be destroyed\nterraform plan -destroy\n\n# Destroy all resources\nterraform destroy\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>l});var r=s(6540);const i={},t=r.createContext(i);function d(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);